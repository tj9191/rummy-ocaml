// Generated by js_of_ocaml
//# buildInfo:effects=false, kind=cmo, use-js-string=true, version=5.6.0

//# unitInfo: Provides: Dune__exe__App
//# unitInfo: Requires: Base__Random, Bonsai, Bonsai_web__Start, Core, Core__Array, Core__Fn, Core__Int, Core__List, Core__Option, Core__Printf, Core__String, Css_gen, Ppx_module_timer_runtime, Rummy_engine__Ai, Rummy_engine__Engine, Rummy_engine__Setup, Rummy_engine__Types, Ui_effect, Virtual_dom__Node, Virtual_dom__Vdom
(function
  (globalThis){
   "use strict";
   var
    runtime = globalThis.jsoo_runtime,
    cst$30 = "",
    cst_d_s = "%d) %s",
    cst$31 = ") ",
    cst_Discard$1 = "Discard",
    cst_Dune_exe_App$1 = "Dune__exe__App",
    cst_Melds_on_table$1 = "Melds on table",
    cst_Please_pass_your_device_to$1 =
      "Please pass your device to the next player.",
    caml_check_bound = runtime.caml_check_bound;
   function caml_call1(f, a0){
    return (f.l >= 0 ? f.l : f.l = f.length) == 1
            ? f(a0)
            : runtime.caml_call_gen(f, [a0]);
   }
   function caml_call2(f, a0, a1){
    return (f.l >= 0 ? f.l : f.l = f.length) == 2
            ? f(a0, a1)
            : runtime.caml_call_gen(f, [a0, a1]);
   }
   function caml_call3(f, a0, a1, a2){
    return (f.l >= 0 ? f.l : f.l = f.length) == 3
            ? f(a0, a1, a2)
            : runtime.caml_call_gen(f, [a0, a1, a2]);
   }
   function caml_call4(f, a0, a1, a2, a3){
    return (f.l >= 0 ? f.l : f.l = f.length) == 4
            ? f(a0, a1, a2, a3)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3]);
   }
   function caml_call5(f, a0, a1, a2, a3, a4){
    return (f.l >= 0 ? f.l : f.l = f.length) == 5
            ? f(a0, a1, a2, a3, a4)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3, a4]);
   }
   var
    global_data = runtime.caml_get_global_data(),
    cst$24 = cst$30,
    cst$25 = cst$30,
    cst$26 = cst$30,
    cst$27 = cst$30,
    cst$28 = cst$30,
    cst$29 = cst$30,
    cst$18 = cst$30,
    cst$19 = cst$30,
    cst$20 = cst$30,
    cst$21 = cst$30,
    cst$22 = cst$30,
    cst$23 = cst$30,
    cst$11 = cst$30,
    cst$12 = cst$30,
    cst$13 = cst$30,
    cst$14 = cst$30,
    cst$15 = cst$30,
    cst$16 = cst$30,
    cst$5 = cst$30,
    cst$6 = cst$30,
    cst$7 = cst$30,
    cst$8 = cst$30,
    cst$9 = cst$30,
    cst$10 = cst$30,
    cst$17 = cst$30,
    cst = cst$30,
    cst$0 = cst$30,
    cst$1 = cst$30,
    cst$2 = cst$30,
    cst$3 = cst$30,
    cst$4 = cst$30,
    Ui_effect = global_data.Ui_effect,
    Core_String = global_data.Core__String,
    Core_Int = global_data.Core__Int,
    Core = global_data.Core,
    Rummy_engine_Engine = global_data.Rummy_engine__Engine,
    Rummy_engine_Ai = global_data.Rummy_engine__Ai,
    Virtual_dom_Node = global_data.Virtual_dom__Node,
    Css_gen = global_data.Css_gen,
    Virtual_dom_Vdom = global_data.Virtual_dom__Vdom,
    Core_List = global_data.Core__List,
    Core_Printf = global_data.Core__Printf,
    Base_Random = global_data.Base__Random,
    Bonsai = global_data.Bonsai,
    Core_Option = global_data.Core__Option,
    Core_Fn = global_data.Core__Fn,
    Rummy_engine_Setup = global_data.Rummy_engine__Setup,
    Core_Array = global_data.Core__Array,
    Rummy_engine_Types = global_data.Rummy_engine__Types,
    Ppx_module_timer_runtime = global_data.Ppx_module_timer_runtime,
    Bonsai_web_Start = global_data.Bonsai_web__Start,
    cst_Draw_N_from_discard = "Draw N from discard",
    _g_ = [0, 17960, 8],
    _h_ = [0, 17960, 80],
    cst_N = "N",
    cst_number = "number",
    cst_Draw_top_of_discard = "Draw top of discard",
    _i_ = [0, 17960, 8],
    cst_Draw_from_deck = "Draw from deck",
    cst_Draw_phase = "Draw phase",
    cst_Skip_to_Discard = "Skip to Discard",
    _m_ = [0, 17960, 8],
    cst_Layoff_card_on_meld = "Layoff card on meld",
    _n_ = [0, 17960, 8],
    _o_ = [0, 17960, 6],
    _p_ = [0, 17960, 140],
    cst_on_meld_index = "on meld index",
    _q_ = [0, 17960, 140],
    cst_layoff_card_index = "layoff: card index",
    cst_Make_run = "Make run",
    _r_ = [0, 17960, 8],
    _s_ = [0, 17960, 240],
    cst_run_indices_e_g_2_3_4 = "run: indices e.g. 2 3 4",
    cst_Make_set = "Make set",
    _t_ = [0, 17960, 8],
    _u_ = [0, 17960, 240],
    cst_set_indices_e_g_1_3_5 = "set: indices e.g. 1 3 5",
    cst_Play_phase = "Play phase",
    cst_Discard$0 = cst_Discard$1,
    _v_ = [0, 17960, 8],
    _w_ = [0, 17960, 160],
    cst_discard_card_index = "discard: card index",
    cst_Discard_phase = "Discard phase",
    cst_Please_pass_your_device_to$0 = cst_Please_pass_your_device_to$1,
    _x_ = [0, 869834347, "red"],
    cst_Continue_End_check = "Continue / End check",
    cst_End_of_turn_checks = "End-of-turn checks",
    cst_Back = "\xe2\xac\x85 Back",
    _j_ = [0, 17960, 10],
    cst_Please_pass_your_device_to = cst_Please_pass_your_device_to$1,
    cst_s_hand = "'s hand",
    _k_ =
      [0,
       [11, "Deck: ", [4, 0, 0, 0, [11, "   Discard: ", [4, 0, 0, 0, 0]]]],
       "Deck: %d   Discard: %d"],
    _l_ =
      [0,
       [11, "Current: ", [2, 0, [11, " (phase: ", [2, 0, [12, 41, 0]]]]],
       "Current: %s (phase: %s)"],
    cst_Play_vs_Computer = "Play vs Computer",
    _y_ = [0, 17960, 10],
    cst_Pass_Play = "Pass & Play",
    cst_Choose_a_mode_to_begin = "Choose a mode to begin:",
    cst_Welcome_to_Rummy = "Welcome to Rummy!",
    cst_Player_1 = "Player 1",
    cst_Computer = "Computer",
    cst_Player_2 = "Player 2",
    _f_ = [0, 0],
    cst_Run = "Run",
    cst_Set = "Set",
    _d_ = [0, ", "],
    _e_ =
      [0,
       [4, 0, 0, 0, [11, cst$31, [2, 0, [11, ": ", [2, 0, 0]]]]],
       "%d) %s: %s"],
    cst_none_yet = "(none yet)",
    cst_Melds_on_table = cst_Melds_on_table$1,
    cst_Melds_on_table$0 = cst_Melds_on_table$1,
    _b_ = [0, [11, "top: ", [2, 0, 0]], "top: %s"],
    _c_ = [0, [4, 0, 0, 0, [11, cst$31, [2, 0, 0]]], cst_d_s],
    cst_Discard_pile_top_bottom = "Discard pile (top \xe2\x86\x92 bottom)",
    _a_ = [0, [4, 0, 0, 0, [11, cst$31, [2, 0, 0]]], cst_d_s],
    cst_Draw = "Draw",
    cst_Play = "Play",
    cst_Discard = cst_Discard$1,
    cst_EndCheck = "EndCheck",
    cst_Dune_exe_App = cst_Dune_exe_App$1,
    _z_ = [0, "app"],
    cst_Dune_exe_App$0 = cst_Dune_exe_App$1;
   caml_call1(Ppx_module_timer_runtime[4], cst_Dune_exe_App);
   function h(r){return [0, 0, r];}
   function s(r){return [0, 1, r];}
   function d(r){return [0, 2, r];}
   function c(r){return [0, 3, r];}
   function string_of_card(c){return caml_call1(Rummy_engine_Types[3], c);}
   function string_of_phase(param){
    switch(param){
      case 0:
       return cst_Draw;
      case 1:
       return cst_Play;
      case 2:
       return cst_Discard;
      default: return cst_EndCheck;
    }
   }
   function view_cards(cards){
    function _cZ_(i, c){
     var
      _c1_ = string_of_card(c),
      label = caml_call3(Core_Printf[2], _a_, i + 1 | 0, _c1_),
      _c2_ = [0, caml_call1(Virtual_dom_Node[6], label), 0];
     return caml_call3(Virtual_dom_Node[38], 0, 0, _c2_);
    }
    var _c0_ = caml_call2(Core_List[41], cards, _cZ_);
    return caml_call3(Virtual_dom_Node[54], 0, 0, _c0_);
   }
   function view_discard(discard){
    function _cS_(i, c){
     if(caml_call2(Core[90], i, 0))
      var
       _cW_ = string_of_card(c),
       label = caml_call2(Core_Printf[2], _b_, _cW_);
     else
      var
       _cY_ = string_of_card(c),
       label = caml_call3(Core_Printf[2], _c_, i, _cY_);
     var _cX_ = [0, caml_call1(Virtual_dom_Node[6], label), 0];
     return caml_call3(Virtual_dom_Node[38], 0, 0, _cX_);
    }
    var
     items = caml_call2(Core_List[41], discard, _cS_),
     _cT_ = [0, caml_call3(Virtual_dom_Node[54], 0, 0, items), 0],
     _cU_ =
       [0, caml_call1(Virtual_dom_Node[6], cst_Discard_pile_top_bottom), 0],
     _cV_ = [0, caml_call3(Virtual_dom_Node[24], 0, 0, _cU_), _cT_];
    return caml_call3(Virtual_dom_Node[17], 0, 0, _cV_);
   }
   function view_melds(melds){
    if(caml_call1(Core_List[18], melds)){
     var
      _cH_ = [0, caml_call1(Virtual_dom_Node[6], cst_none_yet), 0],
      _cI_ = [0, caml_call3(Virtual_dom_Node[39], 0, 0, _cH_), 0],
      _cJ_ = [0, caml_call1(Virtual_dom_Node[6], cst_Melds_on_table), 0],
      _cK_ = [0, caml_call3(Virtual_dom_Node[24], 0, 0, _cJ_), _cI_];
     return caml_call3(Virtual_dom_Node[17], 0, 0, _cK_);
    }
    function _cL_(i, m){
     var
      kind_str = m[1] ? cst_Run : cst_Set,
      _cP_ = caml_call2(Core_List[51], m[2], string_of_card),
      cards_str = caml_call2(Core_String[46], _d_, _cP_),
      _cQ_ = caml_call4(Core_Printf[2], _e_, i + 1 | 0, kind_str, cards_str),
      _cR_ = [0, caml_call1(Virtual_dom_Node[6], _cQ_), 0];
     return caml_call3(Virtual_dom_Node[38], 0, 0, _cR_);
    }
    var
     meld_nodes = caml_call2(Core_List[41], melds, _cL_),
     _cM_ = [0, caml_call3(Virtual_dom_Node[54], 0, 0, meld_nodes), 0],
     _cN_ = [0, caml_call1(Virtual_dom_Node[6], cst_Melds_on_table$0), 0],
     _cO_ = [0, caml_call3(Virtual_dom_Node[24], 0, 0, _cN_), _cM_];
    return caml_call3(Virtual_dom_Node[17], 0, 0, _cO_);
   }
   function initial_state(vs_computer, param){
    var
     _cq_ = [0, c(1), 0],
     _cr_ = [0, d(1), _cq_],
     _cs_ = [0, s(12), _cr_],
     _ct_ = [0, d(11), _cs_],
     _cu_ = [0, c(7), _ct_],
     _cv_ = [0, h(6), _cu_],
     p0 = [0, 0, cst_Player_1, [0, h(5), _cv_]],
     p1_name = vs_computer ? cst_Computer : cst_Player_2,
     _cw_ = [0, s(9), 0],
     _cx_ = [0, d(7), _cw_],
     _cy_ = [0, s(0), _cx_],
     _cz_ = [0, d(10), _cy_],
     _cA_ = [0, h(10), _cz_],
     _cB_ = [0, c(4), _cA_],
     p1 = [0, 1, p1_name, [0, c(3), _cB_]],
     used_cards = caml_call2(Core[156], p0[3], p1[3]);
    function card_equal(a, b){
     var
      _cF_ = a[1] === b[1] ? 1 : 0,
      _cG_ = _cF_ ? a[2] === b[2] ? 1 : 0 : _cF_;
     return _cG_;
    }
    function _cC_(c){
     function _cE_(u){return card_equal(u, c);}
     return 1 - caml_call2(Core_List[23], used_cards, _cE_);
    }
    var
     _cD_ = caml_call2(Core_List[12], Rummy_engine_Setup[1], _cC_),
     deck_remaining = caml_call1(Rummy_engine_Setup[2], _cD_);
    return [0,
            deck_remaining,
            0,
            0,
            [0, p0, p1],
            0,
            0,
            0,
            _f_,
            0,
            caml_call2(Core_Array[63], 2, 0)];
   }
   function parse_indices(s){
    function _cj_(k){return k - 1 | 0;}
    function _ck_(t){
     function _cp_(param){return caml_call1(Core_Int[78], t);}
     return caml_call1(Core_Option[56], _cp_);
    }
    var
     _cl_ = caml_call1(Core_Fn[2], Core_String[14]),
     _cm_ = caml_call2(Core_String[78], s, 32),
     _cn_ = caml_call2(Core_List[12], _cm_, _cl_),
     _co_ = caml_call2(Core_List[13], _cn_, _ck_);
    return caml_call2(Core_List[51], _co_, _cj_);
   }
   function nth(i, xs){
    function go(k, param){
     var k$0 = k, param$0 = param;
     for(;;){
      if(! param$0) return 0;
      var tl = param$0[2], x = param$0[1];
      if(caml_call2(Core[90], k$0, 0)) return [0, x];
      var k$1 = k$0 - 1 | 0, k$0 = k$1, param$0 = tl;
     }
    }
    return caml_call2(Core[92], i, 0) ? 0 : go(i, xs);
   }
   function cards_by_indices(hand, idxs0){
    function gather(acc, param){
     var acc$0 = acc, param$0 = param;
     for(;;){
      if(! param$0) return [0, caml_call1(Core_List[59], acc$0)];
      var is = param$0[2], i = param$0[1], match = nth(i, hand);
      if(! match) return 0;
      var c = match[1], acc$1 = [0, c, acc$0], acc$0 = acc$1, param$0 = is;
     }
    }
    return gather(0, idxs0);
   }
   function component(graph){
    var
     rng = caml_call1(Base_Random[19][2], [0, 12648430]),
     _A_ =
       [0,
        -783402420,
        0,
        initial_state(0, 0),
        cst$4,
        cst$3,
        cst$2,
        cst$1,
        cst$0,
        cst,
        0],
     state = caml_call5(Bonsai[11], 0, 0, 0, _A_, graph);
    function _B_(param){
     var
      set_all = param[2],
      match = param[1],
      hist = match[10],
      disc_i = match[9],
      lay_m = match[8],
      lay_c = match[7],
      run_s = match[6],
      set_s = match[5],
      drawN = match[4],
      st = match[3],
      vs_comp = match[2],
      screen = match[1];
     function set_all_full
     (screen, vs_comp, st, drawN, set_s, run_s, lay_c, lay_m, disc_i, hist){
      return caml_call1
              (set_all,
               [0,
                screen,
                vs_comp,
                st,
                drawN,
                set_s,
                run_s,
                lay_c,
                lay_m,
                disc_i,
                hist]);
     }
     function set_drawN(s){
      return caml_call1
              (set_all,
               [0,
                screen,
                vs_comp,
                st,
                s,
                set_s,
                run_s,
                lay_c,
                lay_m,
                disc_i,
                hist]);
     }
     function set_set_s(s){
      return caml_call1
              (set_all,
               [0,
                screen,
                vs_comp,
                st,
                drawN,
                s,
                run_s,
                lay_c,
                lay_m,
                disc_i,
                hist]);
     }
     function set_run_s(s){
      return caml_call1
              (set_all,
               [0,
                screen,
                vs_comp,
                st,
                drawN,
                set_s,
                s,
                lay_c,
                lay_m,
                disc_i,
                hist]);
     }
     function set_lay_c(s){
      return caml_call1
              (set_all,
               [0,
                screen,
                vs_comp,
                st,
                drawN,
                set_s,
                run_s,
                s,
                lay_m,
                disc_i,
                hist]);
     }
     function set_lay_m(s){
      return caml_call1
              (set_all,
               [0,
                screen,
                vs_comp,
                st,
                drawN,
                set_s,
                run_s,
                lay_c,
                s,
                disc_i,
                hist]);
     }
     function set_disc_i(s){
      return caml_call1
              (set_all,
               [0,
                screen,
                vs_comp,
                st,
                drawN,
                set_s,
                run_s,
                lay_c,
                lay_m,
                s,
                hist]);
     }
     function set_vs(b){
      return caml_call1
              (set_all,
               [0,
                screen,
                b,
                st,
                drawN,
                set_s,
                run_s,
                lay_c,
                lay_m,
                disc_i,
                hist]);
     }
     function advance_ai_turn(st_start){
      var max_steps = 20;
      function loop(steps, st_ai){
       var steps$0 = steps, st_ai$0 = st_ai;
       for(;;){
        if(caml_call2(Core[90], st_ai$0[5], 0)) return st_ai$0;
        if(caml_call2(Core[89], steps$0, 0))
         return [0,
                 st_ai$0[1],
                 st_ai$0[2],
                 st_ai$0[3],
                 st_ai$0[4],
                 0,
                 0,
                 st_ai$0[7],
                 st_ai$0[8],
                 st_ai$0[9],
                 st_ai$0[10]];
        if(3 <= st_ai$0[6]){
         var match = caml_call1(Rummy_engine_Engine[17], st_ai$0);
         if(2 === match[0])
          return [0,
                  st_ai$0[1],
                  st_ai$0[2],
                  st_ai$0[3],
                  st_ai$0[4],
                  0,
                  0,
                  st_ai$0[7],
                  st_ai$0[8],
                  st_ai$0[9],
                  st_ai$0[10]];
         var st_ai$1 = match[1];
         if(caml_call2(Core[90], st_ai$1[5], 0)) return st_ai$1;
         var steps$1 = steps$0 - 1 | 0, steps$0 = steps$1, st_ai$0 = st_ai$1;
        }
        else{
         var match$0 = caml_call2(Rummy_engine_Ai[14], rng, st_ai$0);
         if(match$0){
          var st_ai$2 = match$0[1];
          if(caml_call2(Core[90], st_ai$2[5], 0)) return st_ai$2;
          var steps$2 = steps$0 - 1 | 0, steps$0 = steps$2, st_ai$0 = st_ai$2;
         }
         else{
          var match$1 = caml_call1(Rummy_engine_Engine[17], st_ai$0);
          if(2 === match$1[0])
           return [0,
                   st_ai$0[1],
                   st_ai$0[2],
                   st_ai$0[3],
                   st_ai$0[4],
                   0,
                   0,
                   st_ai$0[7],
                   st_ai$0[8],
                   st_ai$0[9],
                   st_ai$0[10]];
          var st_ai$3 = match$1[1];
          if(caml_call2(Core[90], st_ai$3[5], 0)) return st_ai$3;
          var steps$3 = steps$0 - 1 | 0, steps$0 = steps$3, st_ai$0 = st_ai$3;
         }
        }
       }
      }
      return loop(max_steps, st_start);
     }
     function apply_and_maybe_ai(st_after){
      var hist$0 = [0, st, hist];
      a:
      {
       if(vs_comp && caml_call2(Core[90], st_after[5], 1)){
        var final_state = advance_ai_turn(st_after);
        break a;
       }
       var final_state = st_after;
      }
      return set_all_full
              (screen,
               vs_comp,
               final_state,
               cst$10,
               cst$9,
               cst$8,
               cst$7,
               cst$6,
               cst$5,
               hist$0);
     }
     function on_back(ev){
      if(! hist) return Ui_effect[1];
      var rest = hist[2], prev = hist[1];
      return set_all_full
              (screen,
               vs_comp,
               prev,
               cst$16,
               cst$15,
               cst$14,
               cst$13,
               cst$12,
               cst$11,
               rest);
     }
     if(-680970418 > screen){
      var
       start_pass_and_play =
         function(ev){
          var
           _ch_ =
             [0,
              set_all_full
               (-680970418,
                0,
                initial_state(0, 0),
                cst$23,
                cst$22,
                cst$21,
                cst$20,
                cst$19,
                cst$18,
                0),
              0],
           _ci_ = [0, set_vs(0), _ch_];
          return [0, Ui_effect[2], _ci_];
         },
       start_vs_computer =
         function(ev){
          var
           _cf_ =
             [0,
              set_all_full
               (-680970418,
                1,
                initial_state(1, 0),
                cst$29,
                cst$28,
                cst$27,
                cst$26,
                cst$25,
                cst$24,
                0),
              0],
           _cg_ = [0, set_vs(1), _cf_];
          return [0, Ui_effect[2], _cg_];
         },
       _bX_ = [0, caml_call1(Virtual_dom_Node[6], cst_Play_vs_Computer), 0],
       _bY_ = caml_call1(Css_gen[77], _y_),
       _bZ_ = [0, caml_call1(Virtual_dom_Vdom[1][32], _bY_), 0],
       _b0_ =
         [0,
          [0, caml_call1(Virtual_dom_Vdom[1][61], start_vs_computer), _bZ_]],
       _b1_ = [0, caml_call3(Virtual_dom_Node[12], 0, _b0_, _bX_), 0],
       _b2_ = [0, caml_call1(Virtual_dom_Node[6], cst_Pass_Play), 0],
       _b3_ =
         [0, [0, caml_call1(Virtual_dom_Vdom[1][61], start_pass_and_play), 0]],
       _b4_ = [0, caml_call3(Virtual_dom_Node[12], 0, _b3_, _b2_), _b1_],
       _b5_ = [0, caml_call3(Virtual_dom_Node[17], 0, 0, _b4_), 0],
       _b6_ =
         [0, caml_call1(Virtual_dom_Node[6], cst_Choose_a_mode_to_begin), 0],
       _b7_ = [0, caml_call3(Virtual_dom_Node[39], 0, 0, _b6_), _b5_],
       _b8_ = [0, caml_call1(Virtual_dom_Node[6], cst_Welcome_to_Rummy), 0],
       _b9_ = [0, caml_call3(Virtual_dom_Node[22], 0, 0, _b8_), _b7_];
      return caml_call3(Virtual_dom_Node[17], 0, 0, _b9_);
     }
     function on_end_check(ev){
      var match = caml_call1(Rummy_engine_Engine[17], st);
      if(2 === match[0]) return Ui_effect[1];
      var st$0 = match[1];
      return apply_and_maybe_ai(st$0);
     }
     switch(st[6]){
       case 0:
        var
         on_draw_deck =
           function(param){
            var match = caml_call2(Rummy_engine_Engine[14], 0, st);
            if(2 === match[0]) return Ui_effect[1];
            var st$0 = match[1];
            return apply_and_maybe_ai(st$0);
           },
         on_draw_discard_top =
           function(param){
            var match = caml_call2(Rummy_engine_Engine[14], 1, st);
            if(2 === match[0]) return Ui_effect[1];
            var st$0 = match[1];
            return apply_and_maybe_ai(st$0);
           },
         on_draw_discard_n =
           function(param){
            var
             _ce_ = caml_call2(Core_String[85], 0, drawN),
             match = caml_call1(Core_Int[15], _ce_);
            a:
            {
             if(match){
              var k = match[1];
              if(caml_call2(Core[91], k, 0)){var n = k; break a;}
             }
             var n = 1;
            }
            var match$0 = caml_call2(Rummy_engine_Engine[14], [0, n], st);
            if(2 === match$0[0]) return Ui_effect[1];
            var st$0 = match$0[1];
            return apply_and_maybe_ai(st$0);
           },
         _D_ =
           [0, caml_call1(Virtual_dom_Node[6], cst_Draw_N_from_discard), 0],
         _E_ = caml_call1(Css_gen[77], _g_),
         _F_ = [0, caml_call1(Virtual_dom_Vdom[1][32], _E_), 0],
         _G_ =
           [0,
            [0, caml_call1(Virtual_dom_Vdom[1][61], on_draw_discard_n), _F_]],
         _H_ = [0, caml_call3(Virtual_dom_Node[12], 0, _G_, _D_), 0],
         _J_ = caml_call1(Css_gen[61], _h_),
         _C_ = 0,
         _I_ = 0,
         _K_ = [0, caml_call1(Virtual_dom_Vdom[1][32], _J_), 0],
         _L_ = function(ev, s){return set_drawN(s);},
         _M_ = [0, caml_call1(Virtual_dom_Vdom[1][57], _L_), _K_],
         _N_ = [0, caml_call1(Virtual_dom_Vdom[1][33], 1.), _M_],
         _O_ = [0, caml_call1(Virtual_dom_Vdom[1][44], drawN), _N_],
         _P_ = [0, caml_call1(Virtual_dom_Vdom[1][27], cst_N), _O_],
         _Q_ = [0, [0, caml_call1(Virtual_dom_Vdom[1][43], cst_number), _P_]],
         _R_ = [0, caml_call3(Virtual_dom_Node[30], 0, _Q_, _I_), _H_],
         _S_ = [0, caml_call3(Virtual_dom_Node[17], 0, 0, _R_), _C_],
         _T_ =
           [0, caml_call1(Virtual_dom_Node[6], cst_Draw_top_of_discard), 0],
         _U_ = caml_call1(Css_gen[77], _i_),
         _V_ = [0, caml_call1(Virtual_dom_Vdom[1][32], _U_), 0],
         _W_ =
           [0,
            [0, caml_call1(Virtual_dom_Vdom[1][61], on_draw_discard_top), _V_]],
         _X_ = [0, caml_call3(Virtual_dom_Node[12], 0, _W_, _T_), 0],
         _Y_ = [0, caml_call1(Virtual_dom_Node[6], cst_Draw_from_deck), 0],
         _Z_ = [0, [0, caml_call1(Virtual_dom_Vdom[1][61], on_draw_deck), 0]],
         ___ = [0, caml_call3(Virtual_dom_Node[12], 0, _Z_, _Y_), _X_],
         _$_ = [0, caml_call3(Virtual_dom_Node[17], 0, 0, ___), _S_],
         _aa_ = [0, caml_call1(Virtual_dom_Node[6], cst_Draw_phase), 0],
         controls = [0, caml_call3(Virtual_dom_Node[24], 0, 0, _aa_), _$_];
        break;
       case 1:
        var
         _aE_ = st[5],
         p$0 = caml_check_bound(st[4], _aE_)[1 + _aE_],
         on_make_set =
           function(param){
            var
             _cd_ = parse_indices(set_s),
             match = cards_by_indices(p$0[3], _cd_);
            if(! match) return Ui_effect[1];
            var
             cs = match[1],
             match$0 = caml_call2(Rummy_engine_Engine[15], [0, cs], st);
            if(2 === match$0[0]) return Ui_effect[1];
            var st$0 = match$0[1];
            return apply_and_maybe_ai(st$0);
           },
         on_make_run =
           function(param){
            var
             _cc_ = parse_indices(run_s),
             match = cards_by_indices(p$0[3], _cc_);
            if(! match) return Ui_effect[1];
            var
             cs = match[1],
             match$0 = caml_call2(Rummy_engine_Engine[15], [1, cs], st);
            if(2 === match$0[0]) return Ui_effect[1];
            var st$0 = match$0[1];
            return apply_and_maybe_ai(st$0);
           },
         on_layoff =
           function(param){
            var
             _ca_ = caml_call2(Core_String[85], 0, lay_c),
             ci_opt = caml_call1(Core_Int[15], _ca_),
             _cb_ = caml_call2(Core_String[85], 0, lay_m),
             mi_opt = caml_call1(Core_Int[15], _cb_);
            if(ci_opt && mi_opt){
             var
              mi1 = mi_opt[1],
              ci1 = ci_opt[1],
              ci0 = ci1 - 1 | 0,
              mi0 = mi1 - 1 | 0,
              match = nth(ci0, p$0[3]);
             if(! match) return Ui_effect[1];
             var
              card = match[1],
              match$0 =
                caml_call2(Rummy_engine_Engine[15], [2, card, mi0], st);
             if(2 === match$0[0]) return Ui_effect[1];
             var st$0 = match$0[1];
             return apply_and_maybe_ai(st$0);
            }
            return Ui_effect[1];
           },
         on_skip =
           function(param){
            var match = caml_call2(Rummy_engine_Engine[15], 0, st);
            if(2 === match[0]) return Ui_effect[1];
            var st$0 = match[1];
            return apply_and_maybe_ai(st$0);
           },
         _aF_ = [0, caml_call1(Virtual_dom_Node[6], cst_Skip_to_Discard), 0],
         _aG_ = caml_call1(Css_gen[75], _m_),
         _aH_ = [0, caml_call1(Virtual_dom_Vdom[1][32], _aG_), 0],
         _aI_ = [0, [0, caml_call1(Virtual_dom_Vdom[1][61], on_skip), _aH_]],
         _aJ_ = [0, caml_call3(Virtual_dom_Node[12], 0, _aI_, _aF_), 0],
         _aK_ =
           [0, caml_call1(Virtual_dom_Node[6], cst_Layoff_card_on_meld), 0],
         _aL_ = caml_call1(Css_gen[77], _n_),
         _aM_ = [0, caml_call1(Virtual_dom_Vdom[1][32], _aL_), 0],
         _aN_ = [0, [0, caml_call1(Virtual_dom_Vdom[1][61], on_layoff), _aM_]],
         _aO_ = [0, caml_call3(Virtual_dom_Node[12], 0, _aN_, _aK_), 0],
         _aQ_ = [0, caml_call1(Css_gen[77], _o_), 0],
         _aR_ = [0, caml_call1(Css_gen[61], _p_), _aQ_],
         _aS_ = caml_call1(Css_gen[31], _aR_),
         _aP_ = 0,
         _aT_ = [0, caml_call1(Virtual_dom_Vdom[1][32], _aS_), 0],
         _aU_ = function(ev, s){return set_lay_m(s);},
         _aV_ = [0, caml_call1(Virtual_dom_Vdom[1][57], _aU_), _aT_],
         _aW_ = [0, caml_call1(Virtual_dom_Vdom[1][44], lay_m), _aV_],
         _aX_ =
           [0,
            [0, caml_call1(Virtual_dom_Vdom[1][27], cst_on_meld_index), _aW_]],
         _aY_ = [0, caml_call3(Virtual_dom_Node[30], 0, _aX_, _aP_), _aO_],
         _a0_ = caml_call1(Css_gen[61], _q_),
         _aZ_ = 0,
         _a1_ = [0, caml_call1(Virtual_dom_Vdom[1][32], _a0_), 0],
         _a2_ = function(ev, s){return set_lay_c(s);},
         _a3_ = [0, caml_call1(Virtual_dom_Vdom[1][57], _a2_), _a1_],
         _a4_ = [0, caml_call1(Virtual_dom_Vdom[1][44], lay_c), _a3_],
         _a5_ =
           [0,
            [0,
             caml_call1(Virtual_dom_Vdom[1][27], cst_layoff_card_index),
             _a4_]],
         _a6_ = [0, caml_call3(Virtual_dom_Node[30], 0, _a5_, _aZ_), _aY_],
         _a7_ = [0, caml_call3(Virtual_dom_Node[17], 0, 0, _a6_), _aJ_],
         _a8_ = [0, caml_call1(Virtual_dom_Node[6], cst_Make_run), 0],
         _a9_ = caml_call1(Css_gen[77], _r_),
         _a__ = [0, caml_call1(Virtual_dom_Vdom[1][32], _a9_), 0],
         _a$_ =
           [0, [0, caml_call1(Virtual_dom_Vdom[1][61], on_make_run), _a__]],
         _ba_ = [0, caml_call3(Virtual_dom_Node[12], 0, _a$_, _a8_), 0],
         _bc_ = caml_call1(Css_gen[61], _s_),
         _bb_ = 0,
         _bd_ = [0, caml_call1(Virtual_dom_Vdom[1][32], _bc_), 0],
         _be_ = function(ev, s){return set_run_s(s);},
         _bf_ = [0, caml_call1(Virtual_dom_Vdom[1][57], _be_), _bd_],
         _bg_ = [0, caml_call1(Virtual_dom_Vdom[1][44], run_s), _bf_],
         _bh_ =
           [0,
            [0,
             caml_call1(Virtual_dom_Vdom[1][27], cst_run_indices_e_g_2_3_4),
             _bg_]],
         _bi_ = [0, caml_call3(Virtual_dom_Node[30], 0, _bh_, _bb_), _ba_],
         _bj_ = [0, caml_call3(Virtual_dom_Node[17], 0, 0, _bi_), _a7_],
         _bk_ = [0, caml_call1(Virtual_dom_Node[6], cst_Make_set), 0],
         _bl_ = caml_call1(Css_gen[77], _t_),
         _bm_ = [0, caml_call1(Virtual_dom_Vdom[1][32], _bl_), 0],
         _bn_ =
           [0, [0, caml_call1(Virtual_dom_Vdom[1][61], on_make_set), _bm_]],
         _bo_ = [0, caml_call3(Virtual_dom_Node[12], 0, _bn_, _bk_), 0],
         _bq_ = caml_call1(Css_gen[61], _u_),
         _bp_ = 0,
         _br_ = [0, caml_call1(Virtual_dom_Vdom[1][32], _bq_), 0],
         _bs_ = function(ev, s){return set_set_s(s);},
         _bt_ = [0, caml_call1(Virtual_dom_Vdom[1][57], _bs_), _br_],
         _bu_ = [0, caml_call1(Virtual_dom_Vdom[1][44], set_s), _bt_],
         _bv_ =
           [0,
            [0,
             caml_call1(Virtual_dom_Vdom[1][27], cst_set_indices_e_g_1_3_5),
             _bu_]],
         _bw_ = [0, caml_call3(Virtual_dom_Node[30], 0, _bv_, _bp_), _bo_],
         _bx_ = [0, caml_call3(Virtual_dom_Node[17], 0, 0, _bw_), _bj_],
         _by_ = [0, caml_call1(Virtual_dom_Node[6], cst_Play_phase), 0],
         controls = [0, caml_call3(Virtual_dom_Node[24], 0, 0, _by_), _bx_];
        break;
       case 2:
        var
         _bz_ = st[5],
         p$1 = caml_check_bound(st[4], _bz_)[1 + _bz_],
         on_discard_click =
           function(param){
            var
             _b__ = caml_call2(Core_String[85], 0, disc_i),
             match = caml_call1(Core_Int[15], _b__);
            a:
            {
             if(match){
              var k = match[1];
              if(caml_call2(Core[88], k, 1)){
               var _b$_ = k - 1 | 0, idx0 = _b$_;
               break a;
              }
             }
             var idx0 = 0;
            }
            var match$0 = nth(idx0, p$1[3]);
            if(! match$0) return Ui_effect[1];
            var
             card = match$0[1],
             match$1 = caml_call2(Rummy_engine_Engine[16], [0, card], st);
            if(2 === match$1[0]) return Ui_effect[1];
            var st$0 = match$1[1];
            return apply_and_maybe_ai(st$0);
           },
         _bB_ = [0, caml_call1(Virtual_dom_Node[6], cst_Discard$0), 0],
         _bC_ = caml_call1(Css_gen[77], _v_),
         _bD_ = [0, caml_call1(Virtual_dom_Vdom[1][32], _bC_), 0],
         _bE_ =
           [0,
            [0, caml_call1(Virtual_dom_Vdom[1][61], on_discard_click), _bD_]],
         _bF_ = [0, caml_call3(Virtual_dom_Node[12], 0, _bE_, _bB_), 0],
         _bH_ = caml_call1(Css_gen[61], _w_),
         _bA_ = 0,
         _bG_ = 0,
         _bI_ = [0, caml_call1(Virtual_dom_Vdom[1][32], _bH_), 0],
         _bJ_ = function(ev, s){return set_disc_i(s);},
         _bK_ = [0, caml_call1(Virtual_dom_Vdom[1][57], _bJ_), _bI_],
         _bL_ = [0, caml_call1(Virtual_dom_Vdom[1][44], disc_i), _bK_],
         _bM_ =
           [0,
            [0,
             caml_call1(Virtual_dom_Vdom[1][27], cst_discard_card_index),
             _bL_]],
         _bN_ = [0, caml_call3(Virtual_dom_Node[30], 0, _bM_, _bG_), _bF_],
         _bO_ = [0, caml_call3(Virtual_dom_Node[17], 0, 0, _bN_), _bA_],
         _bP_ = [0, caml_call1(Virtual_dom_Node[6], cst_Discard_phase), 0],
         controls = [0, caml_call3(Virtual_dom_Node[24], 0, 0, _bP_), _bO_];
        break;
       default:
        if(vs_comp)
         var pass_message = Virtual_dom_Node[4];
        else
         var
          _bU_ =
            [0,
             caml_call1(Virtual_dom_Node[6], cst_Please_pass_your_device_to$0),
             0],
          _bV_ = caml_call1(Css_gen[51], _x_),
          _bW_ = [0, [0, caml_call1(Virtual_dom_Vdom[1][32], _bV_), 0]],
          pass_message = caml_call3(Virtual_dom_Node[39], 0, _bW_, _bU_);
        var
         _bQ_ =
           [0, caml_call1(Virtual_dom_Node[6], cst_Continue_End_check), 0],
         _bR_ = [0, [0, caml_call1(Virtual_dom_Vdom[1][61], on_end_check), 0]],
         _bS_ =
           [0,
            pass_message,
            [0, caml_call3(Virtual_dom_Node[12], 0, _bR_, _bQ_), 0]],
         _bT_ =
           [0, caml_call1(Virtual_dom_Node[6], cst_End_of_turn_checks), 0],
         controls = [0, caml_call3(Virtual_dom_Node[24], 0, 0, _bT_), _bS_];
     }
     var _ab_ = st[5], p = caml_check_bound(st[4], _ab_)[1 + _ab_], _ac_ = 0;
     if(hist)
      var
       _ad_ = [0, caml_call1(Virtual_dom_Node[6], cst_Back), 0],
       _ae_ = caml_call1(Css_gen[75], _j_),
       _af_ = [0, caml_call1(Virtual_dom_Vdom[1][32], _ae_), 0],
       _ag_ = [0, [0, caml_call1(Virtual_dom_Vdom[1][61], on_back), _af_]],
       _ah_ = caml_call3(Virtual_dom_Node[12], 0, _ag_, _ad_);
     else
      var _ah_ = Virtual_dom_Node[4];
     var
      _ai_ =
        [0, caml_call3(Virtual_dom_Node[17], 0, 0, controls), [0, _ah_, _ac_]],
      _aj_ = [0, caml_call3(Virtual_dom_Node[57], 0, 0, 0), _ai_],
      _ak_ = [0, view_melds(st[3]), _aj_],
      _al_ = [0, view_discard(st[2]), _ak_];
     if(3 === st[6])
      var
       _am_ =
         [0,
          caml_call1(Virtual_dom_Node[6], cst_Please_pass_your_device_to),
          0],
       _an_ = [0, caml_call3(Virtual_dom_Node[24], 0, 0, _am_), 0],
       _ao_ = caml_call3(Virtual_dom_Node[17], 0, 0, _an_);
     else
      var
       _aA_ = [0, view_cards(p[3]), 0],
       _aB_ = caml_call2(Core[18], p[2], cst_s_hand),
       _aC_ = [0, caml_call1(Virtual_dom_Node[6], _aB_), 0],
       _aD_ = [0, caml_call3(Virtual_dom_Node[24], 0, 0, _aC_), _aA_],
       _ao_ = caml_call3(Virtual_dom_Node[17], 0, 0, _aD_);
     var
      _ap_ = caml_call1(Core_List[45], st[2]),
      _aq_ = caml_call1(Core_List[45], st[1]),
      _ar_ = caml_call3(Core_Printf[2], _k_, _aq_, _ap_),
      _as_ = [0, caml_call1(Virtual_dom_Node[6], _ar_), 0],
      _at_ =
        [0, caml_call3(Virtual_dom_Node[39], 0, 0, _as_), [0, _ao_, _al_]],
      _au_ = string_of_phase(st[6]),
      _av_ = caml_call3(Core_Printf[2], _l_, p[2], _au_),
      _aw_ = [0, caml_call1(Virtual_dom_Node[6], _av_), 0],
      _ax_ = [0, caml_call3(Virtual_dom_Node[39], 0, 0, _aw_), _at_],
      _ay_ = [0, caml_call1(Virtual_dom_Node[6], cst$17), 0],
      _az_ = [0, caml_call3(Virtual_dom_Node[22], 0, 0, _ay_), _ax_];
     return caml_call3(Virtual_dom_Node[17], 0, 0, _az_);
    }
    return caml_call2(Bonsai[2][2], state, _B_);
   }
   caml_call4(Bonsai_web_Start[2][3], 0, _z_, 0, component);
   caml_call1(Ppx_module_timer_runtime[5], cst_Dune_exe_App$0);
   var Dune_exe_App = [0];
   runtime.caml_register_global(125, Dune_exe_App, cst_Dune_exe_App$1);
   return;
  }
  (globalThis));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLjAsImZpbGUiOiIuYXBwLmVvYmpzL2pzb28vZHVuZV9fZXhlX19BcHAuY21vLmpzIiwic291cmNlUm9vdCI6IiIsIm5hbWVzIjpbImgiLCJyIiwicyIsImQiLCJjIiwic3RyaW5nX29mX2NhcmQiLCJzdHJpbmdfb2ZfcGhhc2UiLCJ2aWV3X2NhcmRzIiwiY2FyZHMiLCJpIiwibGFiZWwiLCJ2aWV3X2Rpc2NhcmQiLCJkaXNjYXJkIiwiaXRlbXMiLCJ2aWV3X21lbGRzIiwibWVsZHMiLCJtIiwia2luZF9zdHIiLCJjYXJkc19zdHIiLCJtZWxkX25vZGVzIiwiaW5pdGlhbF9zdGF0ZSIsInZzX2NvbXB1dGVyIiwicDAiLCJwMV9uYW1lIiwicDEiLCJ1c2VkX2NhcmRzIiwiY2FyZF9lcXVhbCIsImEiLCJiIiwidSIsImRlY2tfcmVtYWluaW5nIiwicGFyc2VfaW5kaWNlcyIsImsiLCJ0IiwibnRoIiwieHMiLCJnbyIsImskMCIsInRsIiwieCIsImNhcmRzX2J5X2luZGljZXMiLCJoYW5kIiwiaWR4czAiLCJnYXRoZXIiLCJhY2MkMCIsImlzIiwiY29tcG9uZW50IiwiZ3JhcGgiLCJybmciLCJzdGF0ZSIsInNldF9hbGwiLCJoaXN0IiwiZGlzY19pIiwibGF5X20iLCJsYXlfYyIsInJ1bl9zIiwic2V0X3MiLCJkcmF3TiIsInN0IiwidnNfY29tcCIsInNjcmVlbiIsInNldF9hbGxfZnVsbCIsInNldF9kcmF3TiIsInNldF9zZXRfcyIsInNldF9ydW5fcyIsInNldF9sYXlfYyIsInNldF9sYXlfbSIsInNldF9kaXNjX2kiLCJzZXRfdnMiLCJhZHZhbmNlX2FpX3R1cm4iLCJzdF9zdGFydCIsIm1heF9zdGVwcyIsImxvb3AiLCJzdGVwcyIsInN0X2FpIiwic3RlcHMkMCIsInN0X2FpJDAiLCJzdF9haSQxIiwic3RlcHMkMSIsInN0X2FpJDIiLCJzdGVwcyQyIiwic3RfYWkkMyIsInN0ZXBzJDMiLCJhcHBseV9hbmRfbWF5YmVfYWkiLCJzdF9hZnRlciIsImhpc3QkMCIsImZpbmFsX3N0YXRlIiwib25fYmFjayIsImV2IiwicmVzdCIsInByZXYiLCJzdGFydF9wYXNzX2FuZF9wbGF5Iiwic3RhcnRfdnNfY29tcHV0ZXIiLCJvbl9lbmRfY2hlY2siLCJzdCQwIiwib25fZHJhd19kZWNrIiwib25fZHJhd19kaXNjYXJkX3RvcCIsIm9uX2RyYXdfZGlzY2FyZF9uIiwibiIsImNvbnRyb2xzIiwicCQwIiwib25fbWFrZV9zZXQiLCJjcyIsIm9uX21ha2VfcnVuIiwib25fbGF5b2ZmIiwiY2lfb3B0IiwibWlfb3B0IiwibWkxIiwiY2kxIiwiY2kwIiwibWkwIiwiY2FyZCIsIm9uX3NraXAiLCJwJDEiLCJvbl9kaXNjYXJkX2NsaWNrIiwiaWR4MCIsInBhc3NfbWVzc2FnZSIsInAiXSwic291cmNlcyI6WyIvd29ya3NwYWNlX3Jvb3QvdWlfYm9uc2FpL3NyYy9hcHAubWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7WUFjSUEsRUFBRUMsR0FBSSxjQUFKQSxHQUFtQztZQUNyQ0MsRUFBRUQsR0FBSSxjQUFKQSxHQUFtQztZQUNyQ0UsRUFBRUYsR0FBSSxjQUFKQSxHQUFtQztZQUNyQ0csRUFBRUgsR0FBSSxjQUFKQSxHQUFtQztZQUVyQ0ksZUFBZ0JELEdBQWMsT0FBQSxrQ0FBZEEsR0FBdUM7WUFFdkRFO0lBQWtCOztPQUNKOztPQUNBOztPQUNBO2VBQ0E7O0dBQVU7WUFxQ3hCQyxXQUFZQztrQkFFYUMsR0FBRUw7S0FFeEI7TUFDa0MsT0FoRHJDQyxlQTZDMkJEO01BRXBCTSxRQUNGLGdDQUhvQkQ7TUFLVCxXQUFFLGdDQUhYQztLQUdTLE9BQUE7SUFBd0I7SUFMeEMsV0FBQSwwQkFGWUY7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QztvQkFEQSxvQ0F6YVRrRDtTQXdhTzs7O2FBQUU7O1NBRlIsV0FBRTtvQkFESjtTQURhLFdBQUU7U0FqTGpCK0MsZUFpTEU7OztRQW9CWixHQS9iYXhDO2FBK2JUeUQ7O1NBSUU7VUFBQTs7YUFBRTs7VUFEdUIsT0FBQTtVQUFsQixlQUFFO1VBSFhBLGVBRUE7UUFVQTtTQUFBO2VBQUU7U0FESyxlQUFFLG9DQXZOSHZCOzs7WUE0TU51QjtnQkFVRjtTQUZhO2VBQUU7U0E3TVBqQixlQTZNUjs7S0FTSSxJQUFBLE9BL2NPekMsT0ErY0gyRCxxQkEvY0czRCx3QkErY0M7UUF4Y0RQO01BbWZOO09BQUEsV0FBRTtPQUZrQixPQUFBO2tCQUFoQjtPQURGLGVBQUUsb0NBL1VIb0M7Y0E2VUg7Ozs7O1lBSkgsdUNBeFBRWTtpQkFzUFI7aUJBNW9CQXJGLFdBNkpXNEM7aUJBOUtYL0MsYUE4S1crQztjQUFBQTtNQWdlSjtPQUFBOztVQUFFOztPQUROLFdBQUU7Y0FESjs7TUFLa0M7a0JBMXBCbkNuRCxXQXNvQlE4RztPQW9CMkIsT0FBQSxxQkFwQjNCQTtPQW9CVSxXQUFFO09BQWpCLFdBQUU7Y0FESjtLQVA4QjtNQUFBLE9BQUEsMEJBM2RwQjNEO01BMmRGLE9BQUEsMEJBM2RFQTtNQTBkTCxPQUFBO01BREosV0FBRTs7WUFESjtNQUZnQixPQXRyQmhCcEQsZ0JBZ09Xb0Q7TUFxZEwsT0FBQSxnQ0FORTJEO01BS04sV0FBRTtpQkFESjtNQUZhLFdBQUU7TUFBakIsV0FBRTtLQUFGLE9BQUE7O0lBbmRLLE9BQUEseUJBaEJEcEU7R0ErZ0JEO0dBR0gsOENBNWhCRUg7Ozs7O0UiLCJzb3VyY2VzQ29udGVudCI6WyJvcGVuISBDb3JlXG5vcGVuISBCb25zYWlcbm9wZW4hIEJvbnNhaV93ZWJcblxubW9kdWxlIFZkb20gID0gVmlydHVhbF9kb20uVmRvbVxubW9kdWxlIFJFICAgID0gUnVtbXlfZW5naW5lXG5tb2R1bGUgVCAgICAgPSBSRS5UeXBlc1xubW9kdWxlIEUgICAgID0gUkUuRW5naW5lXG5tb2R1bGUgU2V0dXAgPSBSdW1teV9lbmdpbmUuU2V0dXBcbm1vZHVsZSBBSSAgICA9IFJ1bW15X2VuZ2luZS5BaVxubW9kdWxlIEh0bWwgPSBKc19vZl9vY2FtbC5Eb21faHRtbFxubW9kdWxlIEpzID0gSnNfb2Zfb2NhbWwuSnNcblxuKCogLS0tLSBoZWxwZXJzIHRvIHdyaXRlIGV4YW1wbGUgaGFuZHMgLS0tLSAqKVxubGV0IGggciA9IHsgVC5zdWl0ID0gSGVhcnRzOyAgIHJhbmsgPSByIH1cbmxldCBzIHIgPSB7IFQuc3VpdCA9IFNwYWRlczsgICByYW5rID0gciB9XG5sZXQgZCByID0geyBULnN1aXQgPSBEaWFtb25kczsgcmFuayA9IHIgfVxubGV0IGMgciA9IHsgVC5zdWl0ID0gQ2x1YnM7ICAgIHJhbmsgPSByIH1cblxubGV0IHN0cmluZ19vZl9jYXJkIChjIDogVC5jYXJkKSA9IFJFLlR5cGVzLnN0cmluZ19vZl9jYXJkIGNcblxubGV0IHN0cmluZ19vZl9waGFzZSA9IGZ1bmN0aW9uXG4gIHwgVC5EcmF3ICAgICAtPiBcIkRyYXdcIlxuICB8IFQuUGxheSAgICAgLT4gXCJQbGF5XCJcbiAgfCBULkRpc2NhcmQgIC0+IFwiRGlzY2FyZFwiXG4gIHwgVC5FbmRDaGVjayAtPiBcIkVuZENoZWNrXCJcblxubGV0IGNhcmRfcG9pbnRfdmFsdWUgKHIgOiBULnJhbmspIDogaW50ID1cbiAgbWF0Y2ggciB3aXRoXG4gIHwgVC5BY2UgICAtPiAxNVxuICB8IFQuVHdvICAgLT4gNVxuICB8IFQuVGhyZWUgLT4gNVxuICB8IFQuRm91ciAgLT4gNVxuICB8IFQuRml2ZSAgLT4gNVxuICB8IFQuU2l4ICAgLT4gNVxuICB8IFQuU2V2ZW4gLT4gNVxuICB8IFQuRWlnaHQgLT4gNVxuICB8IFQuTmluZSAgLT4gNVxuICB8IFQuVGVuICAgLT4gMTBcbiAgfCBULkphY2sgIC0+IDEwXG4gIHwgVC5RdWVlbiAtPiAxMFxuICB8IFQuS2luZyAgLT4gMTBcblxuKCogY29tcHV0ZSB0b3RhbCB2YWx1ZSBvZiBhbGwgY2FyZHMgY3VycmVudGx5IG9uIHRoZSB0YWJsZSBpbiBtZWxkcyAqKVxubGV0IGN1cnJlbnRfdGFibGVfcG9pbnRzIChtZWxkcyA6IFQubWVsZCBsaXN0KSA6IGludCA9XG4gIExpc3Quc3VtIChtb2R1bGUgSW50KSBtZWxkcyB+ZjooZnVuIG0gLT5cbiAgICBMaXN0LnN1bSAobW9kdWxlIEludCkgbS5jYXJkcyB+ZjooZnVuIGNhcmQgLT5cbiAgICAgIGNhcmRfcG9pbnRfdmFsdWUgY2FyZC5ULnJhbmtcbiAgICApXG4gIClcblxuKCogdmlldyB0b3RhbCBtZWxkIHBvaW50cyAqKVxubGV0IHZpZXdfdGFibGVfcG9pbnRzIChtZWxkcyA6IFQubWVsZCBsaXN0KSA9XG4gIGxldCBwdHMgPSBjdXJyZW50X3RhYmxlX3BvaW50cyBtZWxkcyBpblxuICBWZG9tLk5vZGUuZGl2XG4gICAgWyBWZG9tLk5vZGUuaDMgWyBWZG9tLk5vZGUudGV4dCBcIk1lbGQgdmFsdWUgb24gdGFibGVcIiBdXG4gICAgOyBWZG9tLk5vZGUucFxuICAgICAgICBbIFZkb20uTm9kZS50ZXh0XG4gICAgICAgICAgICAoUHJpbnRmLnNwcmludGYgXCIlZCBwb2ludHMgY3VycmVudGx5IGRvd25cIiBwdHMpXG4gICAgICAgIF1cbiAgICBdXG5cbmxldCB2aWV3X2NhcmRzIChjYXJkcyA6IFQuY2FyZCBsaXN0KSA9XG4gIFZkb20uTm9kZS51bFxuICAgIChMaXN0Lm1hcGkgY2FyZHMgfmY6KGZ1biBpIGMgLT5cbiAgICAgICAoKiBkaXNwbGF5IDEtYmFzZWQgaW5kZXggdG8gbWF0Y2ggaG93IHlvdSB0eXBlIG1vdmVzICopXG4gICAgICAgbGV0IGxhYmVsID1cbiAgICAgICAgIFByaW50Zi5zcHJpbnRmIFwiJWQpICVzXCIgKGkgKyAxKSAoc3RyaW5nX29mX2NhcmQgYylcbiAgICAgICBpblxuICAgICAgIFZkb20uTm9kZS5saSBbIFZkb20uTm9kZS50ZXh0IGxhYmVsIF0pKVxuXG5sZXQgdmlld19kaXNjYXJkIChkaXNjYXJkIDogVC5jYXJkIGxpc3QpID1cbiAgKCogdG9wIG9mIGRpc2NhcmQgaXMgaGVhZCBvZiBsaXN0ICopXG4gIGxldCBpdGVtcyA9XG4gICAgTGlzdC5tYXBpIGRpc2NhcmQgfmY6KGZ1biBpIGMgLT5cbiAgICAgIGxldCBsYWJlbCA9XG4gICAgICAgIGlmIGkgPSAwXG4gICAgICAgIHRoZW4gUHJpbnRmLnNwcmludGYgXCJ0b3A6ICVzXCIgKHN0cmluZ19vZl9jYXJkIGMpXG4gICAgICAgIGVsc2UgUHJpbnRmLnNwcmludGYgXCIlZCkgJXNcIiBpIChzdHJpbmdfb2ZfY2FyZCBjKVxuICAgICAgaW5cbiAgICAgIFZkb20uTm9kZS5saSBbIFZkb20uTm9kZS50ZXh0IGxhYmVsIF0pXG4gIGluXG4gIFZkb20uTm9kZS5kaXZcbiAgICBbIFZkb20uTm9kZS5oMyBbIFZkb20uTm9kZS50ZXh0IFwiRGlzY2FyZCBwaWxlICh0b3Ag4oaSIGJvdHRvbSlcIiBdXG4gICAgOyBWZG9tLk5vZGUudWwgaXRlbXNcbiAgICBdXG5cbigqIHNob3cgbWVsZHMgY3VycmVudGx5IG9uIHRoZSB0YWJsZSAqKVxubGV0IHZpZXdfbWVsZHMgKG1lbGRzIDogVC5tZWxkIGxpc3QpID1cbiAgaWYgTGlzdC5pc19lbXB0eSBtZWxkcyB0aGVuXG4gICAgVmRvbS5Ob2RlLmRpdlxuICAgICAgWyBWZG9tLk5vZGUuaDMgWyBWZG9tLk5vZGUudGV4dCBcIk1lbGRzIG9uIHRhYmxlXCIgXVxuICAgICAgOyBWZG9tLk5vZGUucCAgWyBWZG9tLk5vZGUudGV4dCBcIihub25lIHlldClcIiBdXG4gICAgICBdXG4gIGVsc2VcbiAgICBsZXQgbWVsZF9ub2RlcyA9XG4gICAgICBMaXN0Lm1hcGkgbWVsZHMgfmY6KGZ1biBpIG0gLT5cbiAgICAgICAgbGV0IGtpbmRfc3RyID1cbiAgICAgICAgICBtYXRjaCBtLmtpbmQgd2l0aFxuICAgICAgICAgIHwgVC5TZXQgLT4gXCJTZXRcIlxuICAgICAgICAgIHwgVC5SdW4gLT4gXCJSdW5cIlxuICAgICAgICBpblxuICAgICAgICBsZXQgY2FyZHNfc3RyID1cbiAgICAgICAgICBTdHJpbmcuY29uY2F0IH5zZXA6XCIsIFwiXG4gICAgICAgICAgICAoTGlzdC5tYXAgbS5jYXJkcyB+ZjpzdHJpbmdfb2ZfY2FyZClcbiAgICAgICAgaW5cbiAgICAgICAgVmRvbS5Ob2RlLmxpXG4gICAgICAgICAgWyBWZG9tLk5vZGUudGV4dFxuICAgICAgICAgICAgICAoUHJpbnRmLnNwcmludGYgXCIlZCkgJXM6ICVzXCIgKGkgKyAxKSBraW5kX3N0ciBjYXJkc19zdHIpXG4gICAgICAgICAgXSlcbiAgICBpblxuICAgIFZkb20uTm9kZS5kaXZcbiAgICAgIFsgVmRvbS5Ob2RlLmgzIFsgVmRvbS5Ob2RlLnRleHQgXCJNZWxkcyBvbiB0YWJsZVwiIF1cbiAgICAgIDsgVmRvbS5Ob2RlLnVsIG1lbGRfbm9kZXNcbiAgICAgIF1cblxuKCogc2hvdyBjdXJyZW50IHNjb3JlcyBmb3IgZWFjaCBwbGF5ZXIgKilcbmxldCB2aWV3X3Njb3JlcyAoc2NvcmVzIDogaW50IGFycmF5KSAocGxheWVycyA6IFQucGxheWVyIGFycmF5KSA9XG4gIGxldCByb3dzID1cbiAgICBBcnJheS5tYXBpIHBsYXllcnMgfmY6KGZ1biBpIHBsIC0+XG4gICAgICBsZXQgbGFiZWwgPVxuICAgICAgICBQcmludGYuc3ByaW50ZiBcIiVzOiAlZCBwb2ludHNcIiBwbC5ULm5hbWUgc2NvcmVzLihpKVxuICAgICAgaW5cbiAgICAgIFZkb20uTm9kZS5saSBbIFZkb20uTm9kZS50ZXh0IGxhYmVsIF0pXG4gICAgfD4gQXJyYXkudG9fbGlzdFxuICBpblxuICBWZG9tLk5vZGUuZGl2XG4gICAgWyBWZG9tLk5vZGUuaDMgWyBWZG9tLk5vZGUudGV4dCBcIlNjb3Jlc1wiIF1cbiAgICA7IFZkb20uTm9kZS51bCByb3dzXG4gICAgXVxuICBcblxuXG4oKiBidWlsZCBhIHN0YXJ0aW5nIDJwIHN0YXRlOyBwbGF5ZXIgMiBtYXkgYmUgY29tcHV0ZXIgb3IgaHVtYW4gbmFtZSAqKVxubGV0IGluaXRpYWxfc3RhdGUgfnZzX2NvbXB1dGVyICgpIDogVC5zdGF0ZSA9XG4gIGxldCBwMCA9XG4gICAgeyBULmlkID0gMFxuICAgIDsgbmFtZSA9IFwiUGxheWVyIDFcIlxuICAgIDsgaGFuZCA9XG4gICAgICAgIFsgaCBULlNldmVuXG4gICAgICAgIDsgaCBULkVpZ2h0XG4gICAgICAgIDsgYyBULk5pbmVcbiAgICAgICAgOyBkIFQuS2luZ1xuICAgICAgICA7IHMgVC5BY2VcbiAgICAgICAgOyBkIFQuVGhyZWVcbiAgICAgICAgOyBjIFQuVGhyZWVcbiAgICAgICAgXVxuICAgIH1cbiAgaW5cbiAgbGV0IHAxX25hbWUgPSBpZiB2c19jb21wdXRlciB0aGVuIFwiQ29tcHV0ZXJcIiBlbHNlIFwiUGxheWVyIDJcIiBpblxuICBsZXQgcDEgPVxuICAgIHsgVC5pZCA9IDFcbiAgICA7IG5hbWUgPSBwMV9uYW1lXG4gICAgOyBoYW5kID1cbiAgICAgICAgWyBjIFQuRml2ZVxuICAgICAgICA7IGMgVC5TaXhcbiAgICAgICAgOyBoIFQuUXVlZW5cbiAgICAgICAgOyBkIFQuUXVlZW5cbiAgICAgICAgOyBzIFQuVHdvXG4gICAgICAgIDsgZCBULk5pbmVcbiAgICAgICAgOyBzIFQuSmFja1xuICAgICAgICBdXG4gICAgfVxuICBpblxuICAoKiByZW1vdmUgdGhvc2UgY2FyZHMgZnJvbSB0aGUgZGVjayBhbmQgc2h1ZmZsZSB0aGUgcmVzdCAqKVxuICBsZXQgdXNlZF9jYXJkcyA9IHAwLmhhbmQgQCBwMS5oYW5kIGluXG5sZXQgY2FyZF9lcXVhbCAoYSA6IFQuY2FyZCkgKGIgOiBULmNhcmQpID1cbiAgQmFzZS5Qb2x5LihhLnN1aXQgPSBiLnN1aXQgJiYgYS5yYW5rID0gYi5yYW5rKVxuICBpblxuICBsZXQgZGVja19yZW1haW5pbmcgPVxuICAgIFNldHVwLmFsbF9jYXJkc1xuICAgIHw+IExpc3QuZmlsdGVyIH5mOihmdW4gYyAtPlxuICAgICAgICAgbm90IChMaXN0LmV4aXN0cyB1c2VkX2NhcmRzIH5mOihmdW4gdSAtPiBjYXJkX2VxdWFsIHUgYykpKVxuICAgIHw+IFNldHVwLnNodWZmbGVcbiAgaW5cbiAgeyBULmRlY2sgICAgICAgICAgICA9IGRlY2tfcmVtYWluaW5nXG4gIDsgVC5kaXNjYXJkICAgICAgICAgPSBbXVxuICA7IFQubWVsZHMgICAgICAgICAgID0gW11cbiAgOyBULnBsYXllcnMgICAgICAgICA9IFt8IHAwOyBwMSB8XVxuICA7IFQuY3VycmVudCAgICAgICAgID0gMFxuICA7IFQucGhhc2UgICAgICAgICAgID0gVC5EcmF3XG4gIDsgVC5hY2VfcG9saWN5ICAgICAgPSBULkxvd1xuICA7IFQuc2NvcmluZyAgICAgICAgID0geyBULmRlYWR3b29kX3RocmVzaG9sZCA9IE5vbmUgfVxuICA7IFQucmVxdWlyZWRfdG9fdXNlID0gTm9uZVxuICA7IFQuc2NvcmVzICAgICAgICAgID0gQXJyYXkuY3JlYXRlIH5sZW46MiAwXG4gIH1cblxuKCogLS0tLS0gaGVscGVycyBmb3IgcGFyc2luZyB0ZXh0IGlucHV0IGludG8gaW5kaWNlcyAtLS0tLSAqKVxuXG5sZXQgcGFyc2VfaW5kaWNlcyAocyA6IHN0cmluZykgOiBpbnQgbGlzdCA9XG4gIHNcbiAgfD4gU3RyaW5nLnNwbGl0IH5vbjonICdcbiAgfD4gTGlzdC5maWx0ZXIgfmY6KEZuLm5vbiBTdHJpbmcuaXNfZW1wdHkpXG4gIHw+IExpc3QuZmlsdGVyX21hcCB+ZjooZnVuIHQgLT4gT3B0aW9uLnRyeV93aXRoIChmdW4gKCkgLT4gSW50Lm9mX3N0cmluZyB0KSlcbiAgfD4gTGlzdC5tYXAgfmY6KGZ1biBrIC0+IGsgLSAxKVxuXG5sZXQgbnRoIGkgeHMgPVxuICBsZXQgcmVjIGdvIGsgPSBmdW5jdGlvblxuICAgIHwgW10gLT4gTm9uZVxuICAgIHwgeCA6OiB0bCAtPiBpZiBrID0gMCB0aGVuIFNvbWUgeCBlbHNlIGdvIChrIC0gMSkgdGxcbiAgaW5cbiAgaWYgaSA8IDAgdGhlbiBOb25lIGVsc2UgZ28gaSB4c1xuXG5sZXQgY2FyZHNfYnlfaW5kaWNlcyAoaGFuZCA6IFQuY2FyZCBsaXN0KSAoaWR4czAgOiBpbnQgbGlzdCkgOiBULmNhcmQgbGlzdCBvcHRpb24gPVxuICBsZXQgcmVjIGdhdGhlciBhY2MgPSBmdW5jdGlvblxuICAgIHwgW10gLT4gU29tZSAoTGlzdC5yZXYgYWNjKVxuICAgIHwgaSA6OiBpcyAtPlxuICAgICAgKG1hdGNoIG50aCBpIGhhbmQgd2l0aFxuICAgICAgIHwgTm9uZSAtPiBOb25lXG4gICAgICAgfCBTb21lIGMgLT4gZ2F0aGVyIChjIDo6IGFjYykgaXMpXG4gIGluXG4gIGdhdGhlciBbXSBpZHhzMFxuXG4oKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKilcbigqIENvbXBvbmVudCB3aXRoIEFJIHR1cm4gbG9naWMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqKVxuKCogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICopXG5cbmxldCBjb21wb25lbnQgZ3JhcGggPVxuICAoKiBwZXJzaXN0ZW50IFJORyBmb3IgdGhlIGNvbXB1dGVyIHBvbGljeSAqKVxuICBsZXQgcm5nID0gUmFuZG9tLlN0YXRlLm1ha2UgW3wgMHhDMEZGRUUgfF0gaW5cblxuICAoKiBPdXIgZnVsbCBhcHAgbW9kZWw6XG4gICAgIC0gc2NyZWVuIChgSW50cm8gb3IgYFBsYXlpbmcpXG4gICAgIC0gdnNfY29tcCAoYm9vbClcbiAgICAgLSBzdCAoZ2FtZSBzdGF0ZSlcbiAgICAgLSBpbnB1dCBib3hlcyBmb3IgdGhlIGN1cnJlbnQgaHVtYW4gdHVyblxuICAgICAtIGhpc3Q6IHVuZG8gc3RhY2sgb2YgcGFzdCBzdGF0ZXMgKilcbiAgbGV0IHN0YXRlID1cbiAgICBCb25zYWkuc3RhdGVcbiAgICAgIChgSW50cm8sXG4gICAgICAgZmFsc2UsXG4gICAgICAgaW5pdGlhbF9zdGF0ZSB+dnNfY29tcHV0ZXI6ZmFsc2UgKCksXG4gICAgICAgXCJcIiAoKiBkcmF3TiAqKSxcbiAgICAgICBcIlwiICgqIHNldCBpbmRpY2VzICopLFxuICAgICAgIFwiXCIgKCogcnVuIGluZGljZXMgKiksXG4gICAgICAgXCJcIiAoKiBsYXkgY2FyZCBpZHggKiksXG4gICAgICAgXCJcIiAoKiBsYXkgbWVsZCBpZHggKiksXG4gICAgICAgXCJcIiAoKiBkaXNjYXJkIGlkeCAqKSxcbiAgICAgICAoW10gOiBULnN0YXRlIGxpc3QpKVxuICAgICAgZ3JhcGhcbiAgaW5cblxuICBCb25zYWkuVmFsdWUubWFwIHN0YXRlXG4gICAgfmY6KGZ1biAoKHNjcmVlblxuICAgICAgICAgICAgICwgdnNfY29tcFxuICAgICAgICAgICAgICwgc3RcbiAgICAgICAgICAgICAsIGRyYXdOXG4gICAgICAgICAgICAgLCBzZXRfc1xuICAgICAgICAgICAgICwgcnVuX3NcbiAgICAgICAgICAgICAsIGxheV9jXG4gICAgICAgICAgICAgLCBsYXlfbVxuICAgICAgICAgICAgICwgZGlzY19pXG4gICAgICAgICAgICAgLCBoaXN0KSxcbiAgICAgICAgICAgIHNldF9hbGwpIC0+XG4gICAgICAoKiAtLS0tLS0tLS0tLS0tLS0tIGJhc2ljIHNldHRlcnMgLyBpbnB1dCB1cGRhdGVycyAtLS0tLS0tLS0tLS0tLS0tICopXG5cbiAgICAgIGxldCBzZXRfYWxsX2Z1bGxcbiAgICAgICAgICAgIH5zY3JlZW4nXG4gICAgICAgICAgICB+dnNfY29tcCdcbiAgICAgICAgICAgIH5zdCdcbiAgICAgICAgICAgIH5kcmF3TidcbiAgICAgICAgICAgIH5zZXRfcydcbiAgICAgICAgICAgIH5ydW5fcydcbiAgICAgICAgICAgIH5sYXlfYydcbiAgICAgICAgICAgIH5sYXlfbSdcbiAgICAgICAgICAgIH5kaXNjX2knXG4gICAgICAgICAgICB+aGlzdCdcbiAgICAgICAgPVxuICAgICAgICBzZXRfYWxsXG4gICAgICAgICAgKCBzY3JlZW4nXG4gICAgICAgICAgLCB2c19jb21wJ1xuICAgICAgICAgICwgc3QnXG4gICAgICAgICAgLCBkcmF3TidcbiAgICAgICAgICAsIHNldF9zJ1xuICAgICAgICAgICwgcnVuX3MnXG4gICAgICAgICAgLCBsYXlfYydcbiAgICAgICAgICAsIGxheV9tJ1xuICAgICAgICAgICwgZGlzY19pJ1xuICAgICAgICAgICwgaGlzdCdcbiAgICAgICAgICApXG4gICAgICBpblxuXG4gICAgICBsZXQgc2V0X2RyYXdOIHMgPVxuICAgICAgICBzZXRfYWxsXG4gICAgICAgICAgKCBzY3JlZW4sIHZzX2NvbXAsIHN0LCBzLCBzZXRfcywgcnVuX3MsIGxheV9jLCBsYXlfbSwgZGlzY19pLCBoaXN0IClcbiAgICAgIGluXG4gICAgICBsZXQgc2V0X3NldF9zIHMgPVxuICAgICAgICBzZXRfYWxsXG4gICAgICAgICAgKCBzY3JlZW4sIHZzX2NvbXAsIHN0LCBkcmF3TiwgcywgcnVuX3MsIGxheV9jLCBsYXlfbSwgZGlzY19pLCBoaXN0IClcbiAgICAgIGluXG4gICAgICBsZXQgc2V0X3J1bl9zIHMgPVxuICAgICAgICBzZXRfYWxsXG4gICAgICAgICAgKCBzY3JlZW4sIHZzX2NvbXAsIHN0LCBkcmF3Tiwgc2V0X3MsIHMsIGxheV9jLCBsYXlfbSwgZGlzY19pLCBoaXN0IClcbiAgICAgIGluXG4gICAgICBsZXQgc2V0X2xheV9jIHMgPVxuICAgICAgICBzZXRfYWxsXG4gICAgICAgICAgKCBzY3JlZW4sIHZzX2NvbXAsIHN0LCBkcmF3Tiwgc2V0X3MsIHJ1bl9zLCBzLCBsYXlfbSwgZGlzY19pLCBoaXN0IClcbiAgICAgIGluXG4gICAgICBsZXQgc2V0X2xheV9tIHMgPVxuICAgICAgICBzZXRfYWxsXG4gICAgICAgICAgKCBzY3JlZW4sIHZzX2NvbXAsIHN0LCBkcmF3Tiwgc2V0X3MsIHJ1bl9zLCBsYXlfYywgcywgZGlzY19pLCBoaXN0IClcbiAgICAgIGluXG4gICAgICBsZXQgc2V0X2Rpc2NfaSBzID1cbiAgICAgICAgc2V0X2FsbFxuICAgICAgICAgICggc2NyZWVuLCB2c19jb21wLCBzdCwgZHJhd04sIHNldF9zLCBydW5fcywgbGF5X2MsIGxheV9tLCBzLCBoaXN0IClcbiAgICAgIGluXG5cbiAgICAgIGxldCBzZXRfc2NyZWVuIG5ld19zY3JlZW4gPVxuICAgICAgICBzZXRfYWxsXG4gICAgICAgICAgKCBuZXdfc2NyZWVuXG4gICAgICAgICAgLCB2c19jb21wXG4gICAgICAgICAgLCBzdFxuICAgICAgICAgICwgZHJhd05cbiAgICAgICAgICAsIHNldF9zXG4gICAgICAgICAgLCBydW5fc1xuICAgICAgICAgICwgbGF5X2NcbiAgICAgICAgICAsIGxheV9tXG4gICAgICAgICAgLCBkaXNjX2lcbiAgICAgICAgICAsIGhpc3RcbiAgICAgICAgICApXG4gICAgICBpblxuXG4gICAgICBsZXQgc2V0X3ZzIGIgPVxuICAgICAgICBzZXRfYWxsXG4gICAgICAgICAgKCBzY3JlZW5cbiAgICAgICAgICAsIGJcbiAgICAgICAgICAsIHN0XG4gICAgICAgICAgLCBkcmF3TlxuICAgICAgICAgICwgc2V0X3NcbiAgICAgICAgICAsIHJ1bl9zXG4gICAgICAgICAgLCBsYXlfY1xuICAgICAgICAgICwgbGF5X21cbiAgICAgICAgICAsIGRpc2NfaVxuICAgICAgICAgICwgaGlzdFxuICAgICAgICAgIClcbiAgICAgIGluXG5cbiAgICAgICgqIC0tLS0tLS0tLS0tLS0tLS0gY29tcHV0ZXIgdHVybiBsb29wIC0tLS0tLS0tLS0tLS0tLS0gKilcbiAgICAgICgqIExldCB0aGUgQUkgKHBsYXllciAxKSBhdXRvbWF0aWNhbGx5IHBsYXkgdW50aWwgZG9uZS4gKilcblxuKCogLS0tLS0tLS0tLS0tLS0tLSBjb21wdXRlciB0dXJuIGxvb3AgLS0tLS0tLS0tLS0tLS0tLSAqKVxuICAgICAgKCogTGV0IHRoZSBBSSAocGxheWVyIDEpIGF1dG9tYXRpY2FsbHkgcGxheSB1bnRpbCBkb25lLiAqKVxuICAgICAgKCogTGV0IHRoZSBBSSBhY3QgdXAgdG8gTiBzdGVwcy4gQWZ0ZXIgdGhhdCwgaWYgaXQncyBTVElMTCB0aGUgY29tcHV0ZXIncyB0dXJuLFxuICAganVzdCBoYW5kIGl0IGJhY2sgdG8gcGxheWVyIDAgc28gdGhlIFVJIG5ldmVyIGZyZWV6ZXMuICopXG5sZXQgYWR2YW5jZV9haV90dXJuIChzdF9zdGFydCA6IFQuc3RhdGUpIDogVC5zdGF0ZSA9XG4gIGxldCBtYXhfc3RlcHMgPSAyMCBpblxuICBsZXQgcmVjIGxvb3Agc3RlcHMgc3RfYWkgPVxuICAgICgqIGlmIGl0J3MgYWxyZWFkeSBodW1hbidzIHR1cm4sIHdlJ3JlIGRvbmUgKilcbiAgICBpZiBzdF9haS5ULmN1cnJlbnQgPSAwIHRoZW5cbiAgICAgIHN0X2FpXG4gICAgZWxzZSBpZiBzdGVwcyA8PSAwIHRoZW5cbiAgICAgICgqIHNhZmV0eSBjdXRvZmY6IGZvcmNlIHR1cm4gYmFjayB0byBodW1hbiBzbyBVSSBjb250aW51ZXMgKilcbiAgICAgIHsgc3RfYWkgd2l0aCBjdXJyZW50ID0gMDsgcGhhc2UgPSBULkRyYXcgfVxuICAgIGVsc2VcbiAgICAgIG1hdGNoIHN0X2FpLlQucGhhc2Ugd2l0aFxuICAgICAgfCBULkVuZENoZWNrIC0+XG4gICAgICAgIChtYXRjaCBFLmVuZGNoZWNrIHN0X2FpIHdpdGhcbiAgICAgICAgIHwgT2sgc3QnIHwgRW5kX3JvdW5kIHN0JyAtPlxuICAgICAgICAgICBpZiBzdCcuVC5jdXJyZW50ID0gMFxuICAgICAgICAgICB0aGVuIHN0J1xuICAgICAgICAgICBlbHNlIGxvb3AgKHN0ZXBzIC0gMSkgc3QnXG4gICAgICAgICB8IEVycm9yIF8gLT5cbiAgICAgICAgICAgKCogY291bGRuJ3QgZW5kY2hlY2s7IGZvcmNlIHR1cm4gdG8gaHVtYW4gKilcbiAgICAgICAgICAgeyBzdF9haSB3aXRoIGN1cnJlbnQgPSAwOyBwaGFzZSA9IFQuRHJhdyB9KVxuXG4gICAgICB8IFQuRHJhdyB8IFQuUGxheSB8IFQuRGlzY2FyZCAtPlxuICAgICAgICAobWF0Y2ggQUkucmFuZG9tX2FpIHJuZyBzdF9haSB3aXRoXG4gICAgICAgICB8IFNvbWUgc3QnIC0+XG4gICAgICAgICAgIGlmIHN0Jy5ULmN1cnJlbnQgPSAwXG4gICAgICAgICAgIHRoZW4gc3QnXG4gICAgICAgICAgIGVsc2UgbG9vcCAoc3RlcHMgLSAxKSBzdCdcbiAgICAgICAgIHwgTm9uZSAtPlxuICAgICAgICAgICAoKiBBSSBoYWQgbm8gbGVnYWwgbW92ZTsgdHJ5IGVuZGNoZWNrIG9uY2UgKilcbiAgICAgICAgICAgKG1hdGNoIEUuZW5kY2hlY2sgc3RfYWkgd2l0aFxuICAgICAgICAgICAgfCBPayBzdCcgfCBFbmRfcm91bmQgc3QnIC0+XG4gICAgICAgICAgICAgIGlmIHN0Jy5ULmN1cnJlbnQgPSAwXG4gICAgICAgICAgICAgIHRoZW4gc3QnXG4gICAgICAgICAgICAgIGVsc2UgbG9vcCAoc3RlcHMgLSAxKSBzdCdcbiAgICAgICAgICAgIHwgRXJyb3IgXyAtPlxuICAgICAgICAgICAgICAoKiB0cnVseSBzdHVjazsgZm9yY2UgdHVybiB0byBodW1hbiAqKVxuICAgICAgICAgICAgICB7IHN0X2FpIHdpdGggY3VycmVudCA9IDA7IHBoYXNlID0gVC5EcmF3IH0pKVxuICBpblxuICBsb29wIG1heF9zdGVwcyBzdF9zdGFydFxuaW5cblxuICAgICAgKCogVGhpcyBydW5zIGFmdGVyICphbnkqIHN1Y2Nlc3NmdWwgaHVtYW4gYWN0aW9uLlxuICAgICAgICAgLSBQdXNoIHRoZSBwcmV2aW91cyBzdGF0ZSB0byBoaXN0LlxuICAgICAgICAgLSBJZiB2c19jb21wIGFuZCBpdCdzIG5vdyBwbGF5ZXIgMSdzIHR1cm4sIGxldCBBSSBmaW5pc2guXG4gICAgICAgICAtIENsZWFyIHRoZSB0ZXh0IGJveGVzLlxuICAgICAgKilcblxuICAgICAgbGV0IGFwcGx5X2FuZF9tYXliZV9haSAoc3RfYWZ0ZXIgOiBULnN0YXRlKSA6ICh1bml0IFVpX2VmZmVjdC50KSA9XG4gICAgICAgIGxldCBoaXN0JyA9IHN0IDo6IGhpc3QgaW5cbiAgICAgICAgbGV0IGZpbmFsX3N0YXRlID1cbiAgICAgICAgICBpZiB2c19jb21wICYmIHN0X2FmdGVyLlQuY3VycmVudCA9IDFcbiAgICAgICAgICB0aGVuIGFkdmFuY2VfYWlfdHVybiBzdF9hZnRlclxuICAgICAgICAgIGVsc2Ugc3RfYWZ0ZXJcbiAgICAgICAgaW5cblxuICAgICAgICBzZXRfYWxsX2Z1bGxcbiAgICAgICAgICB+c2NyZWVuJzpzY3JlZW5cbiAgICAgICAgICB+dnNfY29tcCc6dnNfY29tcFxuICAgICAgICAgIH5zdCc6ZmluYWxfc3RhdGVcbiAgICAgICAgICB+ZHJhd04nOlwiXCJcbiAgICAgICAgICB+c2V0X3MnOlwiXCJcbiAgICAgICAgICB+cnVuX3MnOlwiXCJcbiAgICAgICAgICB+bGF5X2MnOlwiXCJcbiAgICAgICAgICB+bGF5X20nOlwiXCJcbiAgICAgICAgICB+ZGlzY19pJzpcIlwiXG4gICAgICAgICAgfmhpc3QnOmhpc3QnXG4gICAgICBpblxuXG4gICAgICAoKiBVbmRvL2JhY2sgYnV0dG9uOiBwb3AgZnJvbSBoaXN0ICopXG4gICAgICBsZXQgb25fYmFjayBfZXYgPVxuICAgICAgICBtYXRjaCBoaXN0IHdpdGhcbiAgICAgICAgfCBwcmV2IDo6IHJlc3QgLT5cbiAgICAgICAgICBzZXRfYWxsX2Z1bGxcbiAgICAgICAgICAgIH5zY3JlZW4nOnNjcmVlblxuICAgICAgICAgICAgfnZzX2NvbXAnOnZzX2NvbXBcbiAgICAgICAgICAgIH5zdCc6cHJldlxuICAgICAgICAgICAgfmRyYXdOJzpcIlwiXG4gICAgICAgICAgICB+c2V0X3MnOlwiXCJcbiAgICAgICAgICAgIH5ydW5fcyc6XCJcIlxuICAgICAgICAgICAgfmxheV9jJzpcIlwiXG4gICAgICAgICAgICB+bGF5X20nOlwiXCJcbiAgICAgICAgICAgIH5kaXNjX2knOlwiXCJcbiAgICAgICAgICAgIH5oaXN0JzpyZXN0XG4gICAgICAgIHwgW10gLT4gVWlfZWZmZWN0Lklnbm9yZVxuICAgICAgaW5cblxuICAgICAgKCogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKilcbiAgICAgICgqIFNjcmVlbiBicmFuY2hpbmcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICopXG4gICAgICAoKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqKVxuXG4gICAgICBtYXRjaCBzY3JlZW4gd2l0aFxuICAgICAgfCBgSW50cm8gLT5cbiAgICAgICAgbGV0IHN0YXJ0X3Bhc3NfYW5kX3BsYXkgX2V2ID1cbiAgICAgICAgICBVaV9lZmZlY3QuTWFueVxuICAgICAgICAgICAgWyBzZXRfdnMgZmFsc2VcbiAgICAgICAgICAgIDsgc2V0X2FsbF9mdWxsXG4gICAgICAgICAgICAgICAgfnNjcmVlbic6YFBsYXlpbmdcbiAgICAgICAgICAgICAgICB+dnNfY29tcCc6ZmFsc2VcbiAgICAgICAgICAgICAgICB+c3QnOihpbml0aWFsX3N0YXRlIH52c19jb21wdXRlcjpmYWxzZSAoKSlcbiAgICAgICAgICAgICAgICB+ZHJhd04nOlwiXCJcbiAgICAgICAgICAgICAgICB+c2V0X3MnOlwiXCJcbiAgICAgICAgICAgICAgICB+cnVuX3MnOlwiXCJcbiAgICAgICAgICAgICAgICB+bGF5X2MnOlwiXCJcbiAgICAgICAgICAgICAgICB+bGF5X20nOlwiXCJcbiAgICAgICAgICAgICAgICB+ZGlzY19pJzpcIlwiXG4gICAgICAgICAgICAgICAgfmhpc3QnOltdXG4gICAgICAgICAgICBdXG4gICAgICAgIGluXG4gICAgICAgIGxldCBzdGFydF92c19jb21wdXRlciBfZXYgPVxuICAgICAgICAgIFVpX2VmZmVjdC5NYW55XG4gICAgICAgICAgICBbIHNldF92cyB0cnVlXG4gICAgICAgICAgICA7IHNldF9hbGxfZnVsbFxuICAgICAgICAgICAgICAgIH5zY3JlZW4nOmBQbGF5aW5nXG4gICAgICAgICAgICAgICAgfnZzX2NvbXAnOnRydWVcbiAgICAgICAgICAgICAgICB+c3QnOihpbml0aWFsX3N0YXRlIH52c19jb21wdXRlcjp0cnVlICgpKVxuICAgICAgICAgICAgICAgIH5kcmF3Tic6XCJcIlxuICAgICAgICAgICAgICAgIH5zZXRfcyc6XCJcIlxuICAgICAgICAgICAgICAgIH5ydW5fcyc6XCJcIlxuICAgICAgICAgICAgICAgIH5sYXlfYyc6XCJcIlxuICAgICAgICAgICAgICAgIH5sYXlfbSc6XCJcIlxuICAgICAgICAgICAgICAgIH5kaXNjX2knOlwiXCJcbiAgICAgICAgICAgICAgICB+aGlzdCc6W11cbiAgICAgICAgICAgIF1cbiAgICAgICAgaW5cblxuICAgICAgICBWZG9tLk5vZGUuZGl2XG4gICAgICAgICAgWyBWZG9tLk5vZGUuaDEgWyBWZG9tLk5vZGUudGV4dCBcIldlbGNvbWUgdG8gUnVtbXkhXCIgXVxuICAgICAgICAgIDsgVmRvbS5Ob2RlLnAgIFsgVmRvbS5Ob2RlLnRleHQgXCJDaG9vc2UgYSBtb2RlIHRvIGJlZ2luOlwiIF1cbiAgICAgICAgICA7IFZkb20uTm9kZS5kaXZcbiAgICAgICAgICAgICAgWyBWZG9tLk5vZGUuYnV0dG9uXG4gICAgICAgICAgICAgICAgICB+YXR0cnM6WyBWZG9tLkF0dHIub25fY2xpY2sgc3RhcnRfcGFzc19hbmRfcGxheSBdXG4gICAgICAgICAgICAgICAgICBbIFZkb20uTm9kZS50ZXh0IFwiUGFzcyAmIFBsYXlcIiBdXG4gICAgICAgICAgICAgIDsgVmRvbS5Ob2RlLmJ1dHRvblxuICAgICAgICAgICAgICAgICAgfmF0dHJzOlxuICAgICAgICAgICAgICAgICAgICBbIFZkb20uQXR0ci5vbl9jbGljayBzdGFydF92c19jb21wdXRlclxuICAgICAgICAgICAgICAgICAgICA7IFZkb20uQXR0ci5zdHlsZSAoQ3NzX2dlbi5tYXJnaW5fbGVmdCAoYFB4IDEwKSlcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgWyBWZG9tLk5vZGUudGV4dCBcIlBsYXkgdnMgQ29tcHV0ZXJcIiBdXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICBdXG5cbiAgICAgIHwgYFBsYXlpbmcgLT5cbiAgICAgICAgKCogc2hhcmVkIGhhbmRsZXIgZm9yIEVuZENoZWNrIGJ1dHRvbiAqKVxuICAgICAgICBsZXQgb25fZW5kX2NoZWNrIF9ldiA9XG4gICAgICAgICAgbWF0Y2ggRS5lbmRjaGVjayBzdCB3aXRoXG4gICAgICAgICAgfCBPayBzdCcgfCBFbmRfcm91bmQgc3QnIC0+IGFwcGx5X2FuZF9tYXliZV9haSBzdCdcbiAgICAgICAgICB8IEVycm9yIF8gLT4gVWlfZWZmZWN0Lklnbm9yZVxuICAgICAgICBpblxuXG4gICAgICAgICgqIGNvbnRyb2xzIHZhcnkgd2l0aCBwaGFzZSAqKVxuICAgICAgICBsZXQgY29udHJvbHMgOiBWZG9tLk5vZGUudCBsaXN0ID1cbiAgICAgICAgICBtYXRjaCBzdC5waGFzZSB3aXRoXG4gICAgICAgICAgfCBULkRyYXcgLT5cbiAgICAgICAgICAgIGxldCBvbl9kcmF3X2RlY2sgXyA9XG4gICAgICAgICAgICAgIG1hdGNoIEUuZHJhdyB+c291cmNlOlQuRnJvbURlY2sgc3Qgd2l0aFxuICAgICAgICAgICAgICB8IE9rIHN0JyB8IEVuZF9yb3VuZCBzdCcgLT4gYXBwbHlfYW5kX21heWJlX2FpIHN0J1xuICAgICAgICAgICAgICB8IEVycm9yIF8gLT4gVWlfZWZmZWN0Lklnbm9yZVxuICAgICAgICAgICAgaW5cbiAgICAgICAgICAgIGxldCBvbl9kcmF3X2Rpc2NhcmRfdG9wIF8gPVxuICAgICAgICAgICAgICBtYXRjaCBFLmRyYXcgfnNvdXJjZTpULkZyb21EaXNjYXJkIHN0IHdpdGhcbiAgICAgICAgICAgICAgfCBPayBzdCcgfCBFbmRfcm91bmQgc3QnIC0+IGFwcGx5X2FuZF9tYXliZV9haSBzdCdcbiAgICAgICAgICAgICAgfCBFcnJvciBfIC0+IFVpX2VmZmVjdC5JZ25vcmVcbiAgICAgICAgICAgIGluXG4gICAgICAgICAgICBsZXQgb25fZHJhd19kaXNjYXJkX24gXyA9XG4gICAgICAgICAgICAgIGxldCBuID1cbiAgICAgICAgICAgICAgICBtYXRjaCBJbnQub2Zfc3RyaW5nX29wdCAoU3RyaW5nLnN0cmlwIGRyYXdOKSB3aXRoXG4gICAgICAgICAgICAgICAgfCBTb21lIGsgd2hlbiBrID4gMCAtPiBrXG4gICAgICAgICAgICAgICAgfCBfIC0+IDFcbiAgICAgICAgICAgICAgaW5cbiAgICAgICAgICAgICAgbWF0Y2ggRS5kcmF3IH5zb3VyY2U6KFQuRnJvbURpc2NhcmROIG4pIHN0IHdpdGhcbiAgICAgICAgICAgICAgfCBPayBzdCcgfCBFbmRfcm91bmQgc3QnIC0+IGFwcGx5X2FuZF9tYXliZV9haSBzdCdcbiAgICAgICAgICAgICAgfCBFcnJvciBfIC0+IFVpX2VmZmVjdC5JZ25vcmVcbiAgICAgICAgICAgIGluXG4gICAgICAgICAgICBbIFZkb20uTm9kZS5oMyBbIFZkb20uTm9kZS50ZXh0IFwiRHJhdyBwaGFzZVwiIF1cbiAgICAgICAgICAgIDsgVmRvbS5Ob2RlLmRpdlxuICAgICAgICAgICAgICAgIFsgVmRvbS5Ob2RlLmJ1dHRvblxuICAgICAgICAgICAgICAgICAgICB+YXR0cnM6WyBWZG9tLkF0dHIub25fY2xpY2sgb25fZHJhd19kZWNrIF1cbiAgICAgICAgICAgICAgICAgICAgWyBWZG9tLk5vZGUudGV4dCBcIkRyYXcgZnJvbSBkZWNrXCIgXVxuICAgICAgICAgICAgICAgIDsgVmRvbS5Ob2RlLmJ1dHRvblxuICAgICAgICAgICAgICAgICAgICB+YXR0cnM6XG4gICAgICAgICAgICAgICAgICAgICAgWyBWZG9tLkF0dHIub25fY2xpY2sgb25fZHJhd19kaXNjYXJkX3RvcFxuICAgICAgICAgICAgICAgICAgICAgIDsgVmRvbS5BdHRyLnN0eWxlIChDc3NfZ2VuLm1hcmdpbl9sZWZ0IChgUHggOCkpXG4gICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICBbIFZkb20uTm9kZS50ZXh0IFwiRHJhdyB0b3Agb2YgZGlzY2FyZFwiIF1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICA7IFZkb20uTm9kZS5kaXZcbiAgICAgICAgICAgICAgICBbIFZkb20uTm9kZS5pbnB1dFxuICAgICAgICAgICAgICAgICAgICB+YXR0cnM6XG4gICAgICAgICAgICAgICAgICAgICAgWyBWZG9tLkF0dHIudHlwZV8gXCJudW1iZXJcIlxuICAgICAgICAgICAgICAgICAgICAgIDsgVmRvbS5BdHRyLnBsYWNlaG9sZGVyIFwiTlwiXG4gICAgICAgICAgICAgICAgICAgICAgOyBWZG9tLkF0dHIudmFsdWUgZHJhd05cbiAgICAgICAgICAgICAgICAgICAgICA7IFZkb20uQXR0ci5taW4gMS5cbiAgICAgICAgICAgICAgICAgICAgICA7IFZkb20uQXR0ci5vbl9pbnB1dCAoZnVuIF9ldiBzIC0+IHNldF9kcmF3TiBzKVxuICAgICAgICAgICAgICAgICAgICAgIDsgVmRvbS5BdHRyLnN0eWxlIChDc3NfZ2VuLndpZHRoIChgUHggODApKVxuICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgKClcbiAgICAgICAgICAgICAgICA7IFZkb20uTm9kZS5idXR0b25cbiAgICAgICAgICAgICAgICAgICAgfmF0dHJzOlxuICAgICAgICAgICAgICAgICAgICAgIFsgVmRvbS5BdHRyLm9uX2NsaWNrIG9uX2RyYXdfZGlzY2FyZF9uXG4gICAgICAgICAgICAgICAgICAgICAgOyBWZG9tLkF0dHIuc3R5bGUgKENzc19nZW4ubWFyZ2luX2xlZnQgKGBQeCA4KSlcbiAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIFsgVmRvbS5Ob2RlLnRleHQgXCJEcmF3IE4gZnJvbSBkaXNjYXJkXCIgXVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIF1cblxuICAgICAgICAgIHwgVC5QbGF5IC0+XG4gICAgICAgICAgICBsZXQgcCA9IHN0LnBsYXllcnMuKHN0LmN1cnJlbnQpIGluXG4gICAgICAgICAgICBsZXQgb25fbWFrZV9zZXQgXyA9XG4gICAgICAgICAgICAgIG1hdGNoIGNhcmRzX2J5X2luZGljZXMgcC5oYW5kIChwYXJzZV9pbmRpY2VzIHNldF9zKSB3aXRoXG4gICAgICAgICAgICAgIHwgTm9uZSAtPiBVaV9lZmZlY3QuSWdub3JlXG4gICAgICAgICAgICAgIHwgU29tZSBjcyAtPlxuICAgICAgICAgICAgICAgIChtYXRjaCBFLnBsYXkgfmFjdGlvbjooVC5NYWtlX3NldCBjcykgc3Qgd2l0aFxuICAgICAgICAgICAgICAgICB8IE9rIHN0JyB8IEVuZF9yb3VuZCBzdCcgLT4gYXBwbHlfYW5kX21heWJlX2FpIHN0J1xuICAgICAgICAgICAgICAgICB8IEVycm9yIF8gLT4gVWlfZWZmZWN0Lklnbm9yZSlcbiAgICAgICAgICAgIGluXG4gICAgICAgICAgICBsZXQgb25fbWFrZV9ydW4gXyA9XG4gICAgICAgICAgICAgIG1hdGNoIGNhcmRzX2J5X2luZGljZXMgcC5oYW5kIChwYXJzZV9pbmRpY2VzIHJ1bl9zKSB3aXRoXG4gICAgICAgICAgICAgIHwgTm9uZSAtPiBVaV9lZmZlY3QuSWdub3JlXG4gICAgICAgICAgICAgIHwgU29tZSBjcyAtPlxuICAgICAgICAgICAgICAgIChtYXRjaCBFLnBsYXkgfmFjdGlvbjooVC5NYWtlX3J1biBjcykgc3Qgd2l0aFxuICAgICAgICAgICAgICAgICB8IE9rIHN0JyB8IEVuZF9yb3VuZCBzdCcgLT4gYXBwbHlfYW5kX21heWJlX2FpIHN0J1xuICAgICAgICAgICAgICAgICB8IEVycm9yIF8gLT4gVWlfZWZmZWN0Lklnbm9yZSlcbiAgICAgICAgICAgIGluXG4gICAgICAgICAgICBsZXQgb25fbGF5b2ZmIF8gPVxuICAgICAgICAgICAgICBsZXQgY2lfb3B0ID0gSW50Lm9mX3N0cmluZ19vcHQgKFN0cmluZy5zdHJpcCBsYXlfYykgaW5cbiAgICAgICAgICAgICAgbGV0IG1pX29wdCA9IEludC5vZl9zdHJpbmdfb3B0IChTdHJpbmcuc3RyaXAgbGF5X20pIGluXG4gICAgICAgICAgICAgIG1hdGNoIGNpX29wdCwgbWlfb3B0IHdpdGhcbiAgICAgICAgICAgICAgfCBTb21lIGNpMSwgU29tZSBtaTEgLT5cbiAgICAgICAgICAgICAgICBsZXQgY2kwID0gY2kxIC0gMVxuICAgICAgICAgICAgICAgIGFuZCBtaTAgPSBtaTEgLSAxIGluXG4gICAgICAgICAgICAgICAgKG1hdGNoIG50aCBjaTAgcC5oYW5kIHdpdGhcbiAgICAgICAgICAgICAgICAgfCBOb25lIC0+IFVpX2VmZmVjdC5JZ25vcmVcbiAgICAgICAgICAgICAgICAgfCBTb21lIGNhcmQgLT5cbiAgICAgICAgICAgICAgICAgICAobWF0Y2ggRS5wbGF5IH5hY3Rpb246KFQuTGF5X29mZiAoY2FyZCwgbWkwKSkgc3Qgd2l0aFxuICAgICAgICAgICAgICAgICAgICB8IE9rIHN0JyB8IEVuZF9yb3VuZCBzdCcgLT4gYXBwbHlfYW5kX21heWJlX2FpIHN0J1xuICAgICAgICAgICAgICAgICAgICB8IEVycm9yIF8gLT4gVWlfZWZmZWN0Lklnbm9yZSkpXG4gICAgICAgICAgICAgIHwgXyAtPiBVaV9lZmZlY3QuSWdub3JlXG4gICAgICAgICAgICBpblxuICAgICAgICAgICAgbGV0IG9uX3NraXAgXyA9XG4gICAgICAgICAgICAgIG1hdGNoIEUucGxheSB+YWN0aW9uOlQuU2tpcF90b19kaXNjYXJkIHN0IHdpdGhcbiAgICAgICAgICAgICAgfCBPayBzdCcgfCBFbmRfcm91bmQgc3QnIC0+IGFwcGx5X2FuZF9tYXliZV9haSBzdCdcbiAgICAgICAgICAgICAgfCBFcnJvciBfIC0+IFVpX2VmZmVjdC5JZ25vcmVcbiAgICAgICAgICAgIGluXG4gICAgICAgICAgICBbIFZkb20uTm9kZS5oMyBbIFZkb20uTm9kZS50ZXh0IFwiUGxheSBwaGFzZVwiIF1cbiAgICAgICAgICAgIDsgVmRvbS5Ob2RlLmRpdlxuICAgICAgICAgICAgICAgIFsgVmRvbS5Ob2RlLmlucHV0XG4gICAgICAgICAgICAgICAgICAgIH5hdHRyczpcbiAgICAgICAgICAgICAgICAgICAgICBbIFZkb20uQXR0ci5wbGFjZWhvbGRlciBcInNldDogaW5kaWNlcyBlLmcuIDEgMyA1XCJcbiAgICAgICAgICAgICAgICAgICAgICA7IFZkb20uQXR0ci52YWx1ZSBzZXRfc1xuICAgICAgICAgICAgICAgICAgICAgIDsgVmRvbS5BdHRyLm9uX2lucHV0IChmdW4gX2V2IHMgLT4gc2V0X3NldF9zIHMpXG4gICAgICAgICAgICAgICAgICAgICAgOyBWZG9tLkF0dHIuc3R5bGUgKENzc19nZW4ud2lkdGggKGBQeCAyNDApKVxuICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgKClcbiAgICAgICAgICAgICAgICA7IFZkb20uTm9kZS5idXR0b25cbiAgICAgICAgICAgICAgICAgICAgfmF0dHJzOlxuICAgICAgICAgICAgICAgICAgICAgIFsgVmRvbS5BdHRyLm9uX2NsaWNrIG9uX21ha2Vfc2V0XG4gICAgICAgICAgICAgICAgICAgICAgOyBWZG9tLkF0dHIuc3R5bGUgKENzc19nZW4ubWFyZ2luX2xlZnQgKGBQeCA4KSlcbiAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIFsgVmRvbS5Ob2RlLnRleHQgXCJNYWtlIHNldFwiIF1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICA7IFZkb20uTm9kZS5kaXZcbiAgICAgICAgICAgICAgICBbIFZkb20uTm9kZS5pbnB1dFxuICAgICAgICAgICAgICAgICAgICB+YXR0cnM6XG4gICAgICAgICAgICAgICAgICAgICAgWyBWZG9tLkF0dHIucGxhY2Vob2xkZXIgXCJydW46IGluZGljZXMgZS5nLiAyIDMgNFwiXG4gICAgICAgICAgICAgICAgICAgICAgOyBWZG9tLkF0dHIudmFsdWUgcnVuX3NcbiAgICAgICAgICAgICAgICAgICAgICA7IFZkb20uQXR0ci5vbl9pbnB1dCAoZnVuIF9ldiBzIC0+IHNldF9ydW5fcyBzKVxuICAgICAgICAgICAgICAgICAgICAgIDsgVmRvbS5BdHRyLnN0eWxlIChDc3NfZ2VuLndpZHRoIChgUHggMjQwKSlcbiAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICgpXG4gICAgICAgICAgICAgICAgOyBWZG9tLk5vZGUuYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIH5hdHRyczpcbiAgICAgICAgICAgICAgICAgICAgICBbIFZkb20uQXR0ci5vbl9jbGljayBvbl9tYWtlX3J1blxuICAgICAgICAgICAgICAgICAgICAgIDsgVmRvbS5BdHRyLnN0eWxlIChDc3NfZ2VuLm1hcmdpbl9sZWZ0IChgUHggOCkpXG4gICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICBbIFZkb20uTm9kZS50ZXh0IFwiTWFrZSBydW5cIiBdXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgOyBWZG9tLk5vZGUuZGl2XG4gICAgICAgICAgICAgICAgWyBWZG9tLk5vZGUuaW5wdXRcbiAgICAgICAgICAgICAgICAgICAgfmF0dHJzOlxuICAgICAgICAgICAgICAgICAgICAgIFsgVmRvbS5BdHRyLnBsYWNlaG9sZGVyIFwibGF5b2ZmOiBjYXJkIGluZGV4XCJcbiAgICAgICAgICAgICAgICAgICAgICA7IFZkb20uQXR0ci52YWx1ZSBsYXlfY1xuICAgICAgICAgICAgICAgICAgICAgIDsgVmRvbS5BdHRyLm9uX2lucHV0IChmdW4gX2V2IHMgLT4gc2V0X2xheV9jIHMpXG4gICAgICAgICAgICAgICAgICAgICAgOyBWZG9tLkF0dHIuc3R5bGUgKENzc19nZW4ud2lkdGggKGBQeCAxNDApKVxuICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgKClcbiAgICAgICAgICAgICAgICA7IFZkb20uTm9kZS5pbnB1dFxuICAgICAgICAgICAgICAgICAgICB+YXR0cnM6XG4gICAgICAgICAgICAgICAgICAgICAgWyBWZG9tLkF0dHIucGxhY2Vob2xkZXIgXCJvbiBtZWxkIGluZGV4XCJcbiAgICAgICAgICAgICAgICAgICAgICA7IFZkb20uQXR0ci52YWx1ZSBsYXlfbVxuICAgICAgICAgICAgICAgICAgICAgIDsgVmRvbS5BdHRyLm9uX2lucHV0IChmdW4gX2V2IHMgLT4gc2V0X2xheV9tIHMpXG4gICAgICAgICAgICAgICAgICAgICAgOyBWZG9tLkF0dHIuc3R5bGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKENzc19nZW4uY29uY2F0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsgQ3NzX2dlbi53aWR0aCAoYFB4IDE0MClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOyBDc3NfZ2VuLm1hcmdpbl9sZWZ0IChgUHggNilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICgpXG4gICAgICAgICAgICAgICAgOyBWZG9tLk5vZGUuYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIH5hdHRyczpcbiAgICAgICAgICAgICAgICAgICAgICBbIFZkb20uQXR0ci5vbl9jbGljayBvbl9sYXlvZmZcbiAgICAgICAgICAgICAgICAgICAgICA7IFZkb20uQXR0ci5zdHlsZSAoQ3NzX2dlbi5tYXJnaW5fbGVmdCAoYFB4IDgpKVxuICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgWyBWZG9tLk5vZGUudGV4dCBcIkxheW9mZiBjYXJkIG9uIG1lbGRcIiBdXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgOyBWZG9tLk5vZGUuYnV0dG9uXG4gICAgICAgICAgICAgICAgfmF0dHJzOlxuICAgICAgICAgICAgICAgICAgWyBWZG9tLkF0dHIub25fY2xpY2sgb25fc2tpcFxuICAgICAgICAgICAgICAgICAgOyBWZG9tLkF0dHIuc3R5bGUgKENzc19nZW4ubWFyZ2luX3RvcCAoYFB4IDgpKVxuICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIFsgVmRvbS5Ob2RlLnRleHQgXCJTa2lwIHRvIERpc2NhcmRcIiBdXG4gICAgICAgICAgICBdXG5cbiAgICAgICAgICB8IFQuRGlzY2FyZCAtPlxuICAgICAgICAgICAgbGV0IHAgPSBzdC5wbGF5ZXJzLihzdC5jdXJyZW50KSBpblxuICAgICAgICAgICAgbGV0IG9uX2Rpc2NhcmRfY2xpY2sgXyA9XG4gICAgICAgICAgICAgIGxldCBpZHgwID1cbiAgICAgICAgICAgICAgICBtYXRjaCBJbnQub2Zfc3RyaW5nX29wdCAoU3RyaW5nLnN0cmlwIGRpc2NfaSkgd2l0aFxuICAgICAgICAgICAgICAgIHwgU29tZSBrIHdoZW4gayA+PSAxIC0+IGsgLSAxXG4gICAgICAgICAgICAgICAgfCBfIC0+IDBcbiAgICAgICAgICAgICAgaW5cbiAgICAgICAgICAgICAgbWF0Y2ggbnRoIGlkeDAgcC5oYW5kIHdpdGhcbiAgICAgICAgICAgICAgfCBOb25lIC0+IFVpX2VmZmVjdC5JZ25vcmVcbiAgICAgICAgICAgICAgfCBTb21lIGNhcmQgLT5cbiAgICAgICAgICAgICAgICAobWF0Y2ggRS5kaXNjYXJkIH5hY3Rpb246KFQuRGlzY2FyZF9jYXJkIGNhcmQpIHN0IHdpdGhcbiAgICAgICAgICAgICAgICAgfCBPayBzdCcgfCBFbmRfcm91bmQgc3QnIC0+IGFwcGx5X2FuZF9tYXliZV9haSBzdCdcbiAgICAgICAgICAgICAgICAgfCBFcnJvciBfIC0+IFVpX2VmZmVjdC5JZ25vcmUpXG4gICAgICAgICAgICBpblxuICAgICAgICAgICAgWyBWZG9tLk5vZGUuaDMgWyBWZG9tLk5vZGUudGV4dCBcIkRpc2NhcmQgcGhhc2VcIiBdXG4gICAgICAgICAgICA7IFZkb20uTm9kZS5kaXZcbiAgICAgICAgICAgICAgICBbIFZkb20uTm9kZS5pbnB1dFxuICAgICAgICAgICAgICAgICAgICB+YXR0cnM6XG4gICAgICAgICAgICAgICAgICAgICAgWyBWZG9tLkF0dHIucGxhY2Vob2xkZXIgXCJkaXNjYXJkOiBjYXJkIGluZGV4XCJcbiAgICAgICAgICAgICAgICAgICAgICA7IFZkb20uQXR0ci52YWx1ZSBkaXNjX2lcbiAgICAgICAgICAgICAgICAgICAgICA7IFZkb20uQXR0ci5vbl9pbnB1dCAoZnVuIF9ldiBzIC0+IHNldF9kaXNjX2kgcylcbiAgICAgICAgICAgICAgICAgICAgICA7IFZkb20uQXR0ci5zdHlsZSAoQ3NzX2dlbi53aWR0aCAoYFB4IDE2MCkpXG4gICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAoKVxuICAgICAgICAgICAgICAgIDsgVmRvbS5Ob2RlLmJ1dHRvblxuICAgICAgICAgICAgICAgICAgICB+YXR0cnM6XG4gICAgICAgICAgICAgICAgICAgICAgWyBWZG9tLkF0dHIub25fY2xpY2sgb25fZGlzY2FyZF9jbGlja1xuICAgICAgICAgICAgICAgICAgICAgIDsgVmRvbS5BdHRyLnN0eWxlIChDc3NfZ2VuLm1hcmdpbl9sZWZ0IChgUHggOCkpXG4gICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICBbIFZkb20uTm9kZS50ZXh0IFwiRGlzY2FyZFwiIF1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICBdXG5cbiAgICAgICAgICB8IFQuRW5kQ2hlY2sgLT5cbiAgbGV0IHBhc3NfbWVzc2FnZSA9XG4gICAgaWYgbm90IHZzX2NvbXAgdGhlblxuICAgICAgVmRvbS5Ob2RlLnBcbiAgICAgICAgfmF0dHJzOlsgVmRvbS5BdHRyLnN0eWxlIChDc3NfZ2VuLmNvbG9yIChgTmFtZSBcInJlZFwiKSkgXVxuICAgICAgICBbIFZkb20uTm9kZS50ZXh0IFwiUGxlYXNlIHBhc3MgeW91ciBkZXZpY2UgdG8gdGhlIG5leHQgcGxheWVyLlwiIF1cbiAgICBlbHNlXG4gICAgICBWZG9tLk5vZGUubm9uZVxuICBpblxuICBbIFZkb20uTm9kZS5oMyBbIFZkb20uTm9kZS50ZXh0IFwiRW5kLW9mLXR1cm4gY2hlY2tzXCIgXVxuICA7IHBhc3NfbWVzc2FnZVxuICA7IFZkb20uTm9kZS5idXR0b25cbiAgICAgIH5hdHRyczpbIFZkb20uQXR0ci5vbl9jbGljayBvbl9lbmRfY2hlY2sgXVxuICAgICAgWyBWZG9tLk5vZGUudGV4dCBcIkNvbnRpbnVlIC8gRW5kIGNoZWNrXCIgXVxuICBdXG4gICAgICAgIGluXG5cbiAgICAgICAgKCogbWFpbiBib2FyZCBwYW5lbCAqKVxuICAgICAgICBsZXQgcCA9IHN0LnBsYXllcnMuKHN0LmN1cnJlbnQpIGluXG5WZG9tLk5vZGUuZGl2XG4gIFsgVmRvbS5Ob2RlLmgxIFsgVmRvbS5Ob2RlLnRleHQgXCJcIiBdXG5cbiAgOyBWZG9tLk5vZGUucFxuICAgICAgWyBWZG9tLk5vZGUudGV4dFxuICAgICAgICAgIChQcmludGYuc3ByaW50ZiBcIkN1cnJlbnQ6ICVzIChwaGFzZTogJXMpXCJcbiAgICAgICAgICAgICBwLm5hbWUgKHN0cmluZ19vZl9waGFzZSBzdC5waGFzZSkpIF1cblxuICA7IFZkb20uTm9kZS5wXG4gICAgICBbIFZkb20uTm9kZS50ZXh0XG4gICAgICAgICAgKFByaW50Zi5zcHJpbnRmIFwiRGVjazogJWQgICBEaXNjYXJkOiAlZFwiXG4gICAgICAgICAgICAgKExpc3QubGVuZ3RoIHN0LmRlY2spIChMaXN0Lmxlbmd0aCBzdC5kaXNjYXJkKSkgXVxuXG47IChpZiBQb2x5LihzdC5ULnBoYXNlID0gVC5FbmRDaGVjaykgdGhlblxuICAgICBWZG9tLk5vZGUuZGl2XG4gICAgICAgWyBWZG9tLk5vZGUuaDNcbiAgICAgICAgICAgWyBWZG9tLk5vZGUudGV4dCBcIlBsZWFzZSBwYXNzIHlvdXIgZGV2aWNlIHRvIHRoZSBuZXh0IHBsYXllci5cIiBdIF1cbiAgIGVsc2VcbiAgICAgVmRvbS5Ob2RlLmRpdlxuICAgICAgIFsgVmRvbS5Ob2RlLmgzIFsgVmRvbS5Ob2RlLnRleHQgKHAubmFtZSBeIFwiJ3MgaGFuZFwiKSBdXG4gICAgICAgOyB2aWV3X2NhcmRzIHAuaGFuZFxuICAgICAgIF0pXG5cbiAgKCogc2hvdyBkaXNjYXJkIHBpbGUgKilcbiAgOyB2aWV3X2Rpc2NhcmQgc3QuZGlzY2FyZFxuICBcblxuICAoKiBORVc6IHNob3cgbWVsZHMgdGhhdCBoYXZlIGJlZW4gbGFpZCBvbiB0aGUgdGFibGUgKilcbiAgXG4gIDsgdmlld19tZWxkcyBzdC5tZWxkc1xuXG4gIDsgVmRvbS5Ob2RlLmhyICgpXG5cbiAgOyBWZG9tLk5vZGUuZGl2IGNvbnRyb2xzXG5cbiAgOyAobWF0Y2ggaGlzdCB3aXRoXG4gICAgIHwgXyA6OiBfIC0+XG4gICAgICAgVmRvbS5Ob2RlLmJ1dHRvblxuICAgICAgICAgfmF0dHJzOlxuICAgICAgICAgICBbIFZkb20uQXR0ci5vbl9jbGljayBvbl9iYWNrXG4gICAgICAgICAgIDsgVmRvbS5BdHRyLnN0eWxlIChDc3NfZ2VuLm1hcmdpbl90b3AgKGBQeCAxMCkpXG4gICAgICAgICAgIF1cbiAgICAgICAgIFsgVmRvbS5Ob2RlLnRleHQgXCLirIUgQmFja1wiIF1cbiAgICAgfCBbXSAtPiBWZG9tLk5vZGUubm9uZSlcbiAgXVxuICAgIClcblxubGV0ICgpID1cbiAgQm9uc2FpX3dlYi5TdGFydC5zdGFydFxuICAgIH5iaW5kX3RvX2VsZW1lbnRfd2l0aF9pZDpcImFwcFwiXG4gICAgY29tcG9uZW50Il19
