// Generated by js_of_ocaml
//# buildInfo:effects=false, kind=cma, use-js-string=true, version=5.6.0

//# unitInfo: Provides: Incr_select__
(function
  (globalThis){
   "use strict";
   var
    runtime = globalThis.jsoo_runtime,
    Incr_select = [0],
    Incr_select$0 = [0, Incr_select];
   runtime.caml_register_global(0, Incr_select$0, "Incr_select__");
   return;
  }
  (globalThis));

//# unitInfo: Provides: Incr_select__Incr_select_intf
//# unitInfo: Requires: Ppx_bench_lib__Benchmark_accumulator, Ppx_expect_runtime, Ppx_inline_test_lib, Ppx_module_timer_runtime
(function
  (globalThis){
   "use strict";
   var
    runtime = globalThis.jsoo_runtime,
    cst_Incr_select_Incr_select_in = "Incr_select__Incr_select_intf",
    cst_incr_select = "incr_select";
   function caml_call1(f, a0){
    return (f.l >= 0 ? f.l : f.l = f.length) == 1
            ? f(a0)
            : runtime.caml_call_gen(f, [a0]);
   }
   function caml_call2(f, a0, a1){
    return (f.l >= 0 ? f.l : f.l = f.length) == 2
            ? f(a0, a1)
            : runtime.caml_call_gen(f, [a0, a1]);
   }
   var
    global_data = runtime.caml_get_global_data(),
    Ppx_module_timer_runtime = global_data.Ppx_module_timer_runtime,
    Ppx_bench_lib_Benchmark_accumu =
      global_data.Ppx_bench_lib__Benchmark_accumulator,
    Ppx_expect_runtime = global_data.Ppx_expect_runtime,
    Ppx_inline_test_lib = global_data.Ppx_inline_test_lib;
   caml_call1(Ppx_module_timer_runtime[4], cst_Incr_select_Incr_select_in);
   caml_call1(Ppx_bench_lib_Benchmark_accumu[1][1], cst_incr_select);
   caml_call1(Ppx_expect_runtime[1][1], "src/incr_select_intf.ml");
   caml_call2(Ppx_inline_test_lib[6], cst_incr_select, "incr_select_intf.ml");
   caml_call1(Ppx_inline_test_lib[7], cst_incr_select);
   caml_call1(Ppx_expect_runtime[1][2], 0);
   caml_call1(Ppx_bench_lib_Benchmark_accumu[1][2], 0);
   caml_call1(Ppx_module_timer_runtime[5], cst_Incr_select_Incr_select_in);
   var Incr_select_Incr_select_intf = [0];
   runtime.caml_register_global
    (11, Incr_select_Incr_select_intf, cst_Incr_select_Incr_select_in);
   return;
  }
  (globalThis));

//# unitInfo: Provides: Incr_select
//# unitInfo: Requires: Core, Core__Fn, Core__Hash_set, Core__Hashtbl, Core__List, Core__Option, Ppx_bench_lib__Benchmark_accumulator, Ppx_expect_runtime, Ppx_inline_test_lib, Ppx_module_timer_runtime
(function
  (globalThis){
   "use strict";
   var
    runtime = globalThis.jsoo_runtime,
    cst_Incr_select = "Incr_select",
    cst_incr_select = "incr_select";
   function caml_call1(f, a0){
    return (f.l >= 0 ? f.l : f.l = f.length) == 1
            ? f(a0)
            : runtime.caml_call_gen(f, [a0]);
   }
   function caml_call2(f, a0, a1){
    return (f.l >= 0 ? f.l : f.l = f.length) == 2
            ? f(a0, a1)
            : runtime.caml_call_gen(f, [a0, a1]);
   }
   function caml_call3(f, a0, a1, a2){
    return (f.l >= 0 ? f.l : f.l = f.length) == 3
            ? f(a0, a1, a2)
            : runtime.caml_call_gen(f, [a0, a1, a2]);
   }
   function caml_call4(f, a0, a1, a2, a3){
    return (f.l >= 0 ? f.l : f.l = f.length) == 4
            ? f(a0, a1, a2, a3)
            : runtime.caml_call_gen(f, [a0, a1, a2, a3]);
   }
   var
    global_data = runtime.caml_get_global_data(),
    Core_Hash_set = global_data.Core__Hash_set,
    Core_List = global_data.Core__List,
    Core_Hashtbl = global_data.Core__Hashtbl,
    Core_Option = global_data.Core__Option,
    Core = global_data.Core,
    Core_Fn = global_data.Core__Fn,
    Ppx_module_timer_runtime = global_data.Ppx_module_timer_runtime,
    Ppx_bench_lib_Benchmark_accumu =
      global_data.Ppx_bench_lib__Benchmark_accumulator,
    Ppx_expect_runtime = global_data.Ppx_expect_runtime,
    Ppx_inline_test_lib = global_data.Ppx_inline_test_lib;
   caml_call1(Ppx_module_timer_runtime[4], cst_Incr_select);
   caml_call1(Ppx_bench_lib_Benchmark_accumu[1][1], cst_incr_select);
   caml_call1(Ppx_expect_runtime[1][1], "src/incr_select.ml");
   caml_call2(Ppx_inline_test_lib[6], cst_incr_select, "incr_select.ml");
   caml_call1(Ppx_inline_test_lib[7], cst_incr_select);
   caml_call1(Ppx_expect_runtime[1][2], 0);
   caml_call1(Ppx_bench_lib_Benchmark_accumu[1][2], 0);
   caml_call1(Ppx_module_timer_runtime[5], cst_Incr_select);
   var
    Incr_select =
      [0,
       function(Incr){
        var E = Incr[78], hashtbl_size = 10;
        function setup_generator(hashable, compute_output, make_input_node){
         var
          necessary_dependencies =
            caml_call4(Core_Hashtbl[87][1], 0, [0, hashtbl_size], hashable, 0);
         function make_key_stale(key){
          var
           _v_ = E[2][4],
           _w_ = caml_call2(Core_Hashtbl[56], necessary_dependencies, key),
           _x_ = caml_call2(Core_Option[39], _w_, 0);
          return caml_call2(Core_List[19], _x_, _v_);
         }
         var input_node = caml_call1(make_input_node, make_key_stale);
         caml_call2(Incr[58], input_node, Incr[57][6]);
         function _l_(key){
          var
           input_dep = caml_call2(E[1][2], 0, input_node),
           output_node = [];
          runtime.caml_update_dummy
           (output_node,
            [246,
             function(_m_){
              function _n_(param){return caml_call1(compute_output, key);}
              var
               _o_ =
                 [0,
                  function(is_now_observable){
                   if(is_now_observable){
                    var _p_ = caml_call1(Core[248], output_node);
                    return caml_call3
                            (Core_Hashtbl[81], necessary_dependencies, key, _p_);
                   }
                   function _q_(param){
                    if(! param) return 0;
                    var l = param[1], _r_ = caml_call1(Core[248], output_node);
                    function _s_(_u_){return _r_ === _u_ ? 1 : 0;}
                    var
                     _t_ = caml_call1(Core_Fn[2], _s_),
                     l$0 = caml_call2(Core_List[12], l, _t_);
                    return l$0 ? [0, l$0] : 0;
                   }
                   return caml_call3
                           (Core_Hashtbl[40], necessary_dependencies, key, _q_);
                  }];
              return caml_call2(E[2][2], _o_, _n_);
             }]);
          var output_node$0 = caml_call1(Core[248], output_node);
          caml_call2(E[2][6], output_node$0, input_dep);
          return caml_call1(E[2][3], output_node$0);
         }
         return caml_call1(Core[266], _l_);
        }
        function update_one(input, selected, make_stale){
         function _k_(inp){
          caml_call2(Core_Option[46], inp, make_stale);
          caml_call2(Core_Option[46], selected[1], make_stale);
          selected[1] = inp;
          return 0;
         }
         return caml_call2(Incr[9], input, _k_);
        }
        function select_one(H, input){
         var selected = [0, 0];
         function compute_output(key){
          var match = selected[1];
          if(! match) return 0;
          var key$0 = match[1], _j_ = caml_call2(H[1], key, key$0);
          return caml_call2(Core[90], _j_, 0);
         }
         function make_input_node(make_key_stale){
          return update_one(input, selected, make_key_stale);
         }
         return setup_generator(H[4], compute_output, make_input_node);
        }
        function select_one$0(h, input){
         return select_one(h, caml_call2(Incr[9], input, Core_Option[58]));
        }
        function select_one_value(H, default$0, input){
         var selected = [0, 0];
         function compute_output(key){
          var _h_ = selected[1];
          if(! _h_) return default$0;
          var
           match = _h_[1],
           data = match[2],
           key$0 = match[1],
           _i_ = caml_call2(H[1], key, key$0);
          return caml_call2(Core[90], _i_, 0) ? data : default$0;
         }
         function make_input_node(make_key_stale){
          return update_one
                  (input,
                   selected,
                   function(param){
                    var key = param[1];
                    return caml_call1(make_key_stale, key);
                   });
         }
         return setup_generator(H[4], compute_output, make_input_node);
        }
        function select_one_value$0(h, default$0, input){
         return select_one_value
                 (h, default$0, caml_call2(Incr[9], input, Core_Option[58]));
        }
        function select_many_values(H, default$0, input){
         var
          hashable = H[4],
          selected =
            caml_call4(Core_Hashtbl[87][1], 0, [0, hashtbl_size], hashable, 0);
         function compute_output(key){
          var _g_ = caml_call2(Core_Hashtbl[56], selected, key);
          return caml_call2(Core_Option[39], _g_, default$0);
         }
         function make_input_node(make_key_stale){
          function _e_(inp){
           caml_call2(Core_Hashtbl[19], selected, make_key_stale);
           caml_call1(Core_Hashtbl[16], selected);
           function _f_(param){
            var data = param[2], key = param[1];
            caml_call1(make_key_stale, key);
            return caml_call3(Core_Hashtbl[37], selected, key, data);
           }
           return caml_call2(Core_List[19], inp, _f_);
          }
          return caml_call2(Incr[9], input, _e_);
         }
         return setup_generator(hashable, compute_output, make_input_node);
        }
        function select_many(H, input){
         var
          hashable = H[4],
          selected =
            caml_call4
             (Core_Hash_set[38][1], 0, [0, hashtbl_size], hashable, 0);
         function compute_output(key){
          return caml_call2(Core_Hash_set[20], selected, key);
         }
         function make_input_node(make_key_stale){
          function _a_(inp){
           var old_set = caml_call1(Core_Hash_set[21], selected);
           caml_call1(Core_Hash_set[28], selected);
           function _b_(key){
            if(1 - caml_call2(Core_Hash_set[20], old_set, key))
             caml_call1(make_key_stale, key);
            return caml_call2(Core_Hash_set[22], selected, key);
           }
           caml_call2(Core_List[19], inp, _b_);
           function _c_(key){
            var _d_ = 1 - caml_call2(Core_Hash_set[20], selected, key);
            return _d_ ? caml_call1(make_key_stale, key) : _d_;
           }
           return caml_call2(Core_Hash_set[6], old_set, _c_);
          }
          return caml_call2(Incr[9], input, _a_);
         }
         return setup_generator(hashable, compute_output, make_input_node);
        }
        return [0,
                select_one$0,
                select_one,
                select_one_value$0,
                select_one_value,
                select_many,
                select_many_values];
       }];
   runtime.caml_register_global(17, Incr_select, cst_Incr_select);
   return;
  }
  (globalThis));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLjAsImZpbGUiOiJpbmNyX3NlbGVjdC5jbWEuanMiLCJzb3VyY2VSb290IjoiIiwibmFtZXMiOlsiaGFzaHRibF9zaXplIiwic2V0dXBfZ2VuZXJhdG9yIiwiaGFzaGFibGUiLCJjb21wdXRlX291dHB1dCIsIm1ha2VfaW5wdXRfbm9kZSIsIm5lY2Vzc2FyeV9kZXBlbmRlbmNpZXMiLCJtYWtlX2tleV9zdGFsZSIsImtleSIsImlucHV0X25vZGUiLCJpbnB1dF9kZXAiLCJvdXRwdXRfbm9kZSIsImlzX25vd19vYnNlcnZhYmxlIiwibCIsImwkMCIsIm91dHB1dF9ub2RlJDAiLCJ1cGRhdGVfb25lIiwiaW5wdXQiLCJzZWxlY3RlZCIsIm1ha2Vfc3RhbGUiLCJpbnAiLCJzZWxlY3Rfb25lIiwiSCIsImtleSQwIiwic2VsZWN0X29uZSQwIiwiaCIsInNlbGVjdF9vbmVfdmFsdWUiLCJkZWZhdWx0JDAiLCJkYXRhIiwic2VsZWN0X29uZV92YWx1ZSQwIiwic2VsZWN0X21hbnlfdmFsdWVzIiwic2VsZWN0X21hbnkiLCJvbGRfc2V0Il0sInNvdXJjZXMiOlsiL1VzZXJzL3R5bGFubW9yYW4vLm9wYW0vNS4xLjEvbGliL2luY3Jfc2VsZWN0L2luY3Jfc2VsZWN0X18ubWwiLCIvVXNlcnMvdHlsYW5tb3Jhbi8ub3BhbS81LjEuMS9saWIvaW5jcl9zZWxlY3QvaW5jcl9zZWxlY3QubWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7R0FLdUI7O0lBQUE7Ozs7RTs7Ozs7Ozs7Ozs7O0c7Ozs7O0c7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFOzs7Ozs7Ozs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Rzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBCQ0VqQkE7aUJBY0FDLGdCQUNEQyxVQUNDQyxnQkFDQUM7U0FJQTtVQURFQztZQUNGLHVDQXJCQUwsZUFlREU7a0JBU0tJLGVBQWVDO1VBQ2pCOztXQUFBLE1BQUEsNkJBTEFGLHdCQUlpQkU7V0FDakIsTUFBQTtVQUFBLE9BQUE7U0FFaUM7U0FFbkMsSUFOR0MsYUFNSCxXQVpBSixpQkFPSUU7U0FTTixxQkFWS0U7c0JBV01EO1VBQ1Q7V0FBSUUsWUFBWSx1QkFaYkQ7V0FhS0U7O1lBQUFBOzs7a0NBR1Usa0JBdkJsQlAsZ0JBa0JTSSxLQUsyQjtjQUNKOzs7MkJBQU1JO21CQUM3QixHQUQ2QkE7b0JBR3lCLFVBQUEsc0JBUHZERDtvQkFPdUQsT0FBQTsrQ0F2QjdETCx3QkFjT0U7OztvQkFXK0MsWUFDakM7b0JBR2dDLElBRm5DSyxjQUVtQyxNQUFBLHNCQWIvQ0Y7b0JBYW1DLGtCO29CQUFSO3FCQUFBLE1BQUE7cUJBR2pCRyxNQUhBLDBCQUZFRDsyQkFLRkMsVUFBQUE7bUJBQWU7bUJBUHVCLE9BQUE7OENBekJ0RFIsd0JBY09FO2tCQWtCd0I7Y0FiMUIsT0FBQTs7VUFlVyxJQUFkTyxnQkFBYyxzQkFsQlZKO1VBbUJSLG9CQURJSSxlQW5CQUw7VUFvQkosT0FBQSxvQkFESUs7U0FFb0I7U0F0QnBCLE9BQUE7UUFzQnFCO2lCQU96QkMsV0FBWUMsT0FBT0MsVUFBVUM7c0JBQ1JDO1VBQ3JCLDRCQURxQkEsS0FEUUQ7VUFHN0IsNEJBSG1CRCxhQUFVQztVQUFWRCxjQUNFRTs7U0FHTjtTQUhDLE9BQUEsb0JBREpIO1FBSUk7aUJBR2hCSSxXQUVNQyxHQUNQTDtTQUVjLElBQVhDO2tCQUNBZCxlQUFlSTtVQUNqQixZQUZFVTtzQkFHUTtVQUNLLElBQVJLLGtCQUFRLE1BQUEsV0FQVEQsTUFJV2QsS0FHVmU7VUFBUSxPQUFBO1NBQXNCO2tCQUVuQ2xCLGdCQUFpQkU7VUFDbkIsT0FuQkFTLFdBVURDLE9BRUdDLFVBTWlCWDtTQUNtQztTQUV4RCxPQXRFRUwsZ0JBMERNb0IsTUFJSmxCLGdCQUtBQztRQUd1RDtpQkFHekRtQixhQUFXQyxHQUFFUjtTQUFRLE9BakJyQkksV0FpQldJLEdBQXdCLG9CQUF0QlI7UUFBcUQ7aUJBRWxFUyxpQkFFTUosR0FDUEssV0FDRFY7U0FFZSxJQUFYQztrQkFDQWQsZUFBZUk7VUFDakIsVUFGRVU7b0JBQ0osT0FKQ1M7VUFPMkI7O1dBQVpDO1dBQU5MO1dBQWtCLE1BQUEsV0FScEJELE1BS1dkLEtBR1RlO1VBQWtCLE9BQUEsK0JBQVpLLE9BUGZEO1NBT3dFO2tCQUVyRXRCLGdCQUFpQkU7VUFDbkIsT0F2Q0FTO21CQThCRkM7bUJBRUlDOztvQkFPc0MsSUFBTVY7b0JBQVcsT0FBQSxXQUR0Q0QsZ0JBQzJCQzttQkFBOEI7U0FBQTtTQUU5RSxPQTFGRU4sZ0JBNkVNb0IsTUFLSmxCLGdCQUtBQztRQUd1RDtpQkFHekR3QixtQkFBaUJKLEdBQUdFLFdBQVFWO1NBQzlCLE9BbkJFUztrQkFrQmlCRCxHQUFHRSxXQUNPLG9CQURDVjtRQUM4QjtpQkFHMURhLG1CQUVNUixHQUNQSyxXQUNEVjtTQUVBO1VBQUlkLFdBSkltQjtVQUtKSjtZQUFXLHVDQXRIYmpCLGVBcUhFRTtrQkFFQUMsZUFBZUk7VUFBTSxVQUFBLDZCQURyQlUsVUFDZVY7VUFBbkIsT0FBQSxpQ0FMQ21CO1NBSzBFO2tCQUN2RXRCLGdCQUFpQkU7dUJBQ0lhO1dBQ3JCLDZCQUpBRixVQUVpQlg7V0FHakIsNkJBTEFXOztZQU1pQixJQUFXVSxpQkFBTHBCO1lBQ3JCLFdBTGVELGdCQUlNQztZQUNyQixPQUFBLDZCQVBGVSxVQU11QlYsS0FBS29CO1dBRU07V0FGakIsT0FBQSwwQkFISVI7VUFLYTtVQUxsQixPQUFBLG9CQU5wQkg7U0FXdUM7U0FFdkMsT0FsSEVmLGdCQXVHRUMsVUFFQUMsZ0JBQ0FDO1FBUXFEO2lCQUd2RDBCLFlBQTZCVCxHQUFxQ0w7U0FDcEU7VUFBSWQsV0FEMkJtQjtVQUUzQko7WUFBVzsyQ0FySWJqQixlQW9JRUU7U0FFSixTQUFJQyxlQUFlSTtVQUFNLE9BQUEsOEJBRHJCVSxVQUNlVjtTQUErQjtrQkFDOUNILGdCQUFpQkU7dUJBQ0lhO1dBQ1AsSUFBVlksVUFBVSw4QkFKZGQ7V0FLQSw4QkFMQUE7d0JBTXNCVjtZQUNwQixPQUFPLDhCQUhMd0IsU0FFa0J4QjthQUNtQixXQUx4QkQsZ0JBSUtDO1lBQ21CLE9BQUEsOEJBUHpDVSxVQU1zQlY7V0FFSztXQUYzQiwwQkFIcUJZO3dCQU1TWjtZQUNyQixjQUFBLDhCQVZUVSxVQVM4QlY7eUJBQ1ksV0FSekJELGdCQU9hQztXQUM4QjtXQURuQyxPQUFBLDZCQUxyQndCO1VBTXlEO1VBUDdDLE9BQUEsb0JBTGdEZjtTQVlGO1NBRWxFLE9BbklFZixnQkFzSEVDLFVBRUFDLGdCQUNBQztRQVVxRDs7Z0JBMUR2RG1CO2dCQWpCQUg7Z0JBcUNBUTtnQkFsQkFIO2dCQTBDQUs7Z0JBcEJBRDs7OztFIiwic291cmNlc0NvbnRlbnQiOlsiKCogZ2VuZXJhdGVkIGJ5IGR1bmUgKilcblxuKCoqIEBjYW5vbmljYWwgSW5jcl9zZWxlY3QuSW5jcl9zZWxlY3RfaW50ZiAqKVxubW9kdWxlIEluY3Jfc2VsZWN0X2ludGYgPSBJbmNyX3NlbGVjdF9fSW5jcl9zZWxlY3RfaW50ZlxuXG5tb2R1bGUgSW5jcl9zZWxlY3RfXyA9IHN0cnVjdCBlbmRcbltAQGRlcHJlY2F0ZWQgXCJ0aGlzIG1vZHVsZSBpcyBzaGFkb3dlZFwiXVxuIiwib3BlbiBDb3JlXG5cbm1vZHVsZSBNYWtlIChJbmNyIDogSW5jcmVtZW50YWwuU19nZW4pID0gc3RydWN0XG4gIG1vZHVsZSBFID0gSW5jci5FeHBlcnRcblxuICAoKiBIYXNodGJsIHN0YXJ0cyBvdXQgYXQgYSByaWRpY3Vsb3VzIHNpemUgb2YgMTI4LiBUaGlzIGlzIGEgbW9yZSByZWFzb25hYmxlIG51bWJlclxuICAgICBvZiBiaW5zIHRvIGhhdmUuICopXG4gIGxldCBoYXNodGJsX3NpemUgPSAxMFxuXG4gICgqKiBbc2V0dXBfZ2VuZXJhdG9yXSBzZXRzIHVwIHRoZSBzdGFnZWQgY29udmVyc2lvbi5cblxuICAgICAgW2hhc2hhYmxlXSBpcyB1c2VkIHRvIGJ1aWxkIGEgdGFibGUgb2YgbmVjZXNzYXJ5IGRlcGVuZGVuY2llcy4gV2UgZHJvcCB1bm5lY2Vzc2FyeVxuICAgICAgZGVwZW5kZW5jaWVzIHRvIGFsbG93IHRoZW0gdG8gYmUgY29sbGVjdGVkLlxuXG4gICAgICBbY29tcHV0ZV9vdXRwdXQga2V5XSByZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgb3V0cHV0IG5vZGUgY29ycmVzcG9uZGluZyB0byBba2V5XS5cbiAgICAgIFtjb21wdXRlX291dHB1dF0gaXMgY2xvc2VkIG92ZXIgdGhlIG11dGFibGUgc3RhdGUgZGV0ZXJtaW5pbmcgdGhlIGN1cnJlbnQgdmFsdWUgb2ZcbiAgICAgIHRoZSBzZWxlY3RvcidzIGlucHV0LlxuXG4gICAgICBbbWFrZV9pbnB1dF9ub2RlXSBtYWtlcyBzdXJlIHRoYXQgd2hlbiB0aGUgbXV0YWJsZSBzdGF0ZSBpbnNpZGUgW2NvbXB1dGVfb3V0cHV0XSBpc1xuICAgICAgdXBkYXRlZCwgdGhlIGNvcnJlc3BvbmRpbmcgbm9kZXMgaW4gdGhlIFtuZWNlc3NhcnlfZGVwZW5kZW5jaWVzXSB0YWJsZSBhcmUgbWFkZVxuICAgICAgc3RhbGUuICAqKVxuICBsZXQgc2V0dXBfZ2VuZXJhdG9yXG4gICAgKGhhc2hhYmxlIDogJ2EgSGFzaHRibF9pbnRmLkhhc2hhYmxlLnQpXG4gICAgfihjb21wdXRlX291dHB1dCA6ICdhIC0+ICdiKVxuICAgIH4obWFrZV9pbnB1dF9ub2RlIDogbWFrZV9rZXlfc3RhbGU6KCdhIC0+IHVuaXQpIC0+IHVuaXQgSW5jci50KVxuICAgIDogKCdhIC0+ICdiIEluY3IudCkgU3RhZ2VkLnRcbiAgICA9XG4gICAgbGV0IG5lY2Vzc2FyeV9kZXBlbmRlbmNpZXMgPVxuICAgICAgSGFzaHRibC5Vc2luZ19oYXNoYWJsZS5jcmVhdGUgfnNpemU6aGFzaHRibF9zaXplIH5oYXNoYWJsZSAoKVxuICAgIGluXG4gICAgbGV0IChpbnB1dF9ub2RlIDogdW5pdCBJbmNyLnQpID1cbiAgICAgIGxldCBtYWtlX2tleV9zdGFsZSBrZXkgPVxuICAgICAgICBIYXNodGJsLmZpbmQgbmVjZXNzYXJ5X2RlcGVuZGVuY2llcyBrZXlcbiAgICAgICAgfD4gT3B0aW9uLnZhbHVlIH5kZWZhdWx0OltdXG4gICAgICAgIHw+IExpc3QuaXRlciB+ZjpFLk5vZGUubWFrZV9zdGFsZVxuICAgICAgaW5cbiAgICAgIG1ha2VfaW5wdXRfbm9kZSB+bWFrZV9rZXlfc3RhbGVcbiAgICBpblxuICAgICgqIFNldCB0aGUgY3V0b2ZmIHNvIHRoYXQgd2UgbmV2ZXIgcGFzcyBhdXRvbWF0aWNhbGx5IGZyb20gdGhlIHVwZGF0ZSB0byB0aGUgbm9kZXMuIFdlXG4gICAgICAgd2FudCBldmVyeXRoaW5nIHRvIGdvIHRocm91Z2ggW21ha2Vfa2V5X3N0YWxlXSAqKVxuICAgIEluY3Iuc2V0X2N1dG9mZiBpbnB1dF9ub2RlIEluY3IuQ3V0b2ZmLmFsd2F5cztcbiAgICBzdGFnZSAoZnVuIGtleSAtPlxuICAgICAgbGV0IGlucHV0X2RlcCA9IEUuRGVwZW5kZW5jeS5jcmVhdGUgaW5wdXRfbm9kZSBpblxuICAgICAgbGV0IHJlYyBvdXRwdXRfbm9kZSA9XG4gICAgICAgIGxhenlcbiAgICAgICAgICAoRS5Ob2RlLmNyZWF0ZVxuICAgICAgICAgICAgIChmdW4gKCkgLT4gY29tcHV0ZV9vdXRwdXQga2V5KVxuICAgICAgICAgICAgIH5vbl9vYnNlcnZhYmlsaXR5X2NoYW5nZTooZnVuIH5pc19ub3dfb2JzZXJ2YWJsZSAtPlxuICAgICAgICAgICAgICAgaWYgaXNfbm93X29ic2VydmFibGVcbiAgICAgICAgICAgICAgIHRoZW5cbiAgICAgICAgICAgICAgICAgSGFzaHRibC5hZGRfbXVsdGkgbmVjZXNzYXJ5X2RlcGVuZGVuY2llcyB+a2V5IH5kYXRhOihmb3JjZSBvdXRwdXRfbm9kZSlcbiAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgSGFzaHRibC5jaGFuZ2UgbmVjZXNzYXJ5X2RlcGVuZGVuY2llcyBrZXkgfmY6KGZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgICAgfCBOb25lIC0+IE5vbmVcbiAgICAgICAgICAgICAgICAgICB8IFNvbWUgbCAtPlxuICAgICAgICAgICAgICAgICAgICAgKG1hdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICBMaXN0LmZpbHRlciBsIH5mOihGbi5ub24gKHBoeXNfZXF1YWwgKGZvcmNlIG91dHB1dF9ub2RlKSkpXG4gICAgICAgICAgICAgICAgICAgICAgd2l0aFxuICAgICAgICAgICAgICAgICAgICAgIHwgW10gLT4gTm9uZVxuICAgICAgICAgICAgICAgICAgICAgIHwgbCcgLT4gU29tZSBsJykpKSlcbiAgICAgIGluXG4gICAgICBsZXQgb3V0cHV0X25vZGUgPSBmb3JjZSBvdXRwdXRfbm9kZSBpblxuICAgICAgRS5Ob2RlLmFkZF9kZXBlbmRlbmN5IG91dHB1dF9ub2RlIGlucHV0X2RlcDtcbiAgICAgIEUuTm9kZS53YXRjaCBvdXRwdXRfbm9kZSlcbiAgOztcblxuICAoKiogVGhpcyBjcmVhdGVzIGEgdW5pdCBpbmNyZW1lbnRhbCB0aGF0IGZpcmVzIHdoZW5ldmVyIHRoZSBpbnB1dCBpbmNyZW1lbnRhbFxuICAgICAgZmlyZXMuIFdoZW4gdGhhdCBvY2N1cnMsIGl0IHVwZGF0ZXMgW3NlbGVjdGVkXSB0byBtYXRjaCB0aGUgY3VycmVudCB2YWx1ZSBvZlxuICAgICAgW2lucHV0XSwgYW5kIGNhbGxzIFttYWtlX2tleV9zdGFsZV0gZm9yIGJvdGggdGhlIG9sZCBhbmQgbmV3IHZhbHVlIG9mIHRoZVxuICAgICAgaW5jcmVtZW50YWwuICopXG4gIGxldCB1cGRhdGVfb25lIH5pbnB1dCB+c2VsZWN0ZWQgfm1ha2Vfc3RhbGUgPVxuICAgIEluY3IubWFwIGlucHV0IH5mOihmdW4gaW5wIC0+XG4gICAgICBPcHRpb24uaXRlciBpbnAgfmY6bWFrZV9zdGFsZTtcbiAgICAgIE9wdGlvbi5pdGVyICFzZWxlY3RlZCB+ZjptYWtlX3N0YWxlO1xuICAgICAgc2VsZWN0ZWQgOj0gaW5wKVxuICA7O1xuXG4gIGxldCBzZWxlY3Rfb25lJ1xuICAgICh0eXBlIGEpXG4gICAgKG1vZHVsZSBIIDogSGFzaGFibGUuQ29tbW9uIHdpdGggdHlwZSB0ID0gYSlcbiAgICAoaW5wdXQgOiBhIG9wdGlvbiBJbmNyLnQpXG4gICAgPVxuICAgIGxldCBzZWxlY3RlZCA9IHJlZiBOb25lIGluXG4gICAgbGV0IGNvbXB1dGVfb3V0cHV0IGtleSA9XG4gICAgICBtYXRjaCAhc2VsZWN0ZWQgd2l0aFxuICAgICAgfCBOb25lIC0+IGZhbHNlXG4gICAgICB8IFNvbWUga2V5JyAtPiBILmNvbXBhcmUga2V5IGtleScgPSAwXG4gICAgaW5cbiAgICBsZXQgbWFrZV9pbnB1dF9ub2RlIH5tYWtlX2tleV9zdGFsZSA9XG4gICAgICB1cGRhdGVfb25lIH5pbnB1dCB+c2VsZWN0ZWQgfm1ha2Vfc3RhbGU6bWFrZV9rZXlfc3RhbGVcbiAgICBpblxuICAgIHNldHVwX2dlbmVyYXRvciBILmhhc2hhYmxlIH5jb21wdXRlX291dHB1dCB+bWFrZV9pbnB1dF9ub2RlXG4gIDs7XG5cbiAgbGV0IHNlbGVjdF9vbmUgaCBpbnB1dCA9IHNlbGVjdF9vbmUnIGggKEluY3IubWFwIH5mOk9wdGlvbi5zb21lIGlucHV0KVxuXG4gIGxldCBzZWxlY3Rfb25lX3ZhbHVlJ1xuICAgICh0eXBlIGEpXG4gICAgKG1vZHVsZSBIIDogSGFzaGFibGUuQ29tbW9uIHdpdGggdHlwZSB0ID0gYSlcbiAgICB+ZGVmYXVsdFxuICAgIGlucHV0XG4gICAgPVxuICAgIGxldCBzZWxlY3RlZCA9IHJlZiBOb25lIGluXG4gICAgbGV0IGNvbXB1dGVfb3V0cHV0IGtleSA9XG4gICAgICBtYXRjaCAhc2VsZWN0ZWQgd2l0aFxuICAgICAgfCBOb25lIC0+IGRlZmF1bHRcbiAgICAgIHwgU29tZSAoa2V5JywgZGF0YSkgLT4gaWYgSC5jb21wYXJlIGtleSBrZXknID0gMCB0aGVuIGRhdGEgZWxzZSBkZWZhdWx0XG4gICAgaW5cbiAgICBsZXQgbWFrZV9pbnB1dF9ub2RlIH5tYWtlX2tleV9zdGFsZSA9XG4gICAgICB1cGRhdGVfb25lIH5zZWxlY3RlZCB+aW5wdXQgfm1ha2Vfc3RhbGU6KGZ1biAoa2V5LCBfKSAtPiBtYWtlX2tleV9zdGFsZSBrZXkpXG4gICAgaW5cbiAgICBzZXR1cF9nZW5lcmF0b3IgSC5oYXNoYWJsZSB+Y29tcHV0ZV9vdXRwdXQgfm1ha2VfaW5wdXRfbm9kZVxuICA7O1xuXG4gIGxldCBzZWxlY3Rfb25lX3ZhbHVlIGggfmRlZmF1bHQgaW5wdXQgPVxuICAgIHNlbGVjdF9vbmVfdmFsdWUnIGggfmRlZmF1bHQgKEluY3IubWFwIH5mOk9wdGlvbi5zb21lIGlucHV0KVxuICA7O1xuXG4gIGxldCBzZWxlY3RfbWFueV92YWx1ZXNcbiAgICAodHlwZSBhKVxuICAgIChtb2R1bGUgSCA6IEhhc2hhYmxlLkNvbW1vbiB3aXRoIHR5cGUgdCA9IGEpXG4gICAgfmRlZmF1bHRcbiAgICBpbnB1dFxuICAgID1cbiAgICBsZXQgaGFzaGFibGUgPSBILmhhc2hhYmxlIGluXG4gICAgbGV0IHNlbGVjdGVkID0gSGFzaHRibC5Vc2luZ19oYXNoYWJsZS5jcmVhdGUgfnNpemU6aGFzaHRibF9zaXplIH5oYXNoYWJsZSAoKSBpblxuICAgIGxldCBjb21wdXRlX291dHB1dCBrZXkgPSBIYXNodGJsLmZpbmQgc2VsZWN0ZWQga2V5IHw+IE9wdGlvbi52YWx1ZSB+ZGVmYXVsdCBpblxuICAgIGxldCBtYWtlX2lucHV0X25vZGUgfm1ha2Vfa2V5X3N0YWxlID1cbiAgICAgIEluY3IubWFwIGlucHV0IH5mOihmdW4gaW5wIC0+XG4gICAgICAgIEhhc2h0YmwuaXRlcl9rZXlzIHNlbGVjdGVkIH5mOm1ha2Vfa2V5X3N0YWxlO1xuICAgICAgICBIYXNodGJsLmNsZWFyIHNlbGVjdGVkO1xuICAgICAgICBMaXN0Lml0ZXIgaW5wIH5mOihmdW4gKGtleSwgZGF0YSkgLT5cbiAgICAgICAgICBtYWtlX2tleV9zdGFsZSBrZXk7XG4gICAgICAgICAgSGFzaHRibC5zZXQgc2VsZWN0ZWQgfmtleSB+ZGF0YSkpXG4gICAgaW5cbiAgICBzZXR1cF9nZW5lcmF0b3IgaGFzaGFibGUgfmNvbXB1dGVfb3V0cHV0IH5tYWtlX2lucHV0X25vZGVcbiAgOztcblxuICBsZXQgc2VsZWN0X21hbnkgKHR5cGUgYSkgKG1vZHVsZSBIIDogSGFzaGFibGUuQ29tbW9uIHdpdGggdHlwZSB0ID0gYSkgaW5wdXQgPVxuICAgIGxldCBoYXNoYWJsZSA9IEguaGFzaGFibGUgaW5cbiAgICBsZXQgc2VsZWN0ZWQgPSBIYXNoX3NldC5Vc2luZ19oYXNoYWJsZS5jcmVhdGUgfnNpemU6aGFzaHRibF9zaXplIH5oYXNoYWJsZSAoKSBpblxuICAgIGxldCBjb21wdXRlX291dHB1dCBrZXkgPSBIYXNoX3NldC5tZW0gc2VsZWN0ZWQga2V5IGluXG4gICAgbGV0IG1ha2VfaW5wdXRfbm9kZSB+bWFrZV9rZXlfc3RhbGUgPVxuICAgICAgSW5jci5tYXAgaW5wdXQgfmY6KGZ1biBpbnAgLT5cbiAgICAgICAgbGV0IG9sZF9zZXQgPSBIYXNoX3NldC5jb3B5IHNlbGVjdGVkIGluXG4gICAgICAgIEhhc2hfc2V0LmNsZWFyIHNlbGVjdGVkO1xuICAgICAgICBMaXN0Lml0ZXIgaW5wIH5mOihmdW4ga2V5IC0+XG4gICAgICAgICAgaWYgbm90IChIYXNoX3NldC5tZW0gb2xkX3NldCBrZXkpIHRoZW4gbWFrZV9rZXlfc3RhbGUga2V5O1xuICAgICAgICAgIEhhc2hfc2V0LmFkZCBzZWxlY3RlZCBrZXkpO1xuICAgICAgICBIYXNoX3NldC5pdGVyIG9sZF9zZXQgfmY6KGZ1biBrZXkgLT5cbiAgICAgICAgICBpZiBub3QgKEhhc2hfc2V0Lm1lbSBzZWxlY3RlZCBrZXkpIHRoZW4gbWFrZV9rZXlfc3RhbGUga2V5KSlcbiAgICBpblxuICAgIHNldHVwX2dlbmVyYXRvciBoYXNoYWJsZSB+Y29tcHV0ZV9vdXRwdXQgfm1ha2VfaW5wdXRfbm9kZVxuICA7O1xuZW5kXG4iXX0=
